(function() {
  var __slice = [].slice;

  this.app.module('CardGenerator.generators.iconsGen', function(IconsGen) {
    this.options = {
      counter: 0,
      starsAmount: 0
    };
    return this.draw = function() {
      var args, canvas, ctx, drawIcon, i, iconsData, iconsDataType, model, _i, _ref;
      canvas = arguments[0], model = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
      drawIcon = function() {
        iconsData.iconNum = iconsData.iconNum || app.getRandom(0, appIconsData.length - 1);
        iconsData.randomX = iconsData.randomX || app.getRandom(5, canvas.width);
        iconsData.randomY = iconsData.randomY || app.getRandom(5, canvas.height);
        iconsData.randomFontSize = iconsData.randomFontSize || app.getRandom(20, 100);
        iconsData.randomColor = iconsData.randomColor || Kinetic.Util.getRandomColor();
        ctx.font = "" + iconsData.randomFontSize + "px cardholder-icons";
        ctx.fillStyle = iconsData.randomColor;
        ctx.fillText(appIconsData[iconsData.iconNum].content, iconsData.randomX, iconsData.randomY);
        return iconsData;
      };
      ctx = canvas.getContext('2d');
      iconsData = model.get('iconsData');
      iconsDataType = _.isUndefined(iconsData) || _.isEmpty(iconsData) ? 'notdefined' : 'defined';
      if (iconsDataType === 'notdefined') {
        iconsData = {};
      }
      iconsData.amountOfIcons = iconsData.amountOfIcons || app.getRandom(1, 6);
      for (i = _i = 0, _ref = iconsData.amountOfIcons; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
        drawIcon(i);
      }
      if (iconsDataType === 'notdefined') {
        return model.set('iconsData', iconsData, {
          silent: true
        });
      }
    };
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmRfZ2VuZXJhdG9yL2dlbmVyYXRvcnMvaWNvbnMtZ2VuZXJhdG9yLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUEsa0JBQUE7O0FBQUEsRUFBQSxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQUwsQ0FBWSxtQ0FBWixFQUFpRCxTQUFDLFFBQUQsR0FBQTtBQUVoRCxJQUFBLElBQUMsQ0FBQSxPQUFELEdBQ0M7QUFBQSxNQUFBLE9BQUEsRUFBUyxDQUFUO0FBQUEsTUFDQSxXQUFBLEVBQWEsQ0FEYjtLQURELENBQUE7V0FJQSxJQUFDLENBQUEsSUFBRCxHQUFRLFNBQUEsR0FBQTtBQUNQLFVBQUEseUVBQUE7QUFBQSxNQURRLHVCQUFPLHNCQUFNLDhEQUNyQixDQUFBO0FBQUEsTUFBQSxRQUFBLEdBQVcsU0FBQSxHQUFBO0FBQ1YsUUFBQSxTQUFTLENBQUMsT0FBVixHQUFvQixTQUFTLENBQUMsT0FBVixJQUFxQixHQUFHLENBQUMsU0FBSixDQUFjLENBQWQsRUFBaUIsWUFBWSxDQUFDLE1BQWIsR0FBb0IsQ0FBckMsQ0FBekMsQ0FBQTtBQUFBLFFBQ0EsU0FBUyxDQUFDLE9BQVYsR0FBb0IsU0FBUyxDQUFDLE9BQVYsSUFBcUIsR0FBRyxDQUFDLFNBQUosQ0FBYyxDQUFkLEVBQWlCLE1BQU0sQ0FBQyxLQUF4QixDQUR6QyxDQUFBO0FBQUEsUUFFQSxTQUFTLENBQUMsT0FBVixHQUFvQixTQUFTLENBQUMsT0FBVixJQUFxQixHQUFHLENBQUMsU0FBSixDQUFjLENBQWQsRUFBaUIsTUFBTSxDQUFDLE1BQXhCLENBRnpDLENBQUE7QUFBQSxRQUdBLFNBQVMsQ0FBQyxjQUFWLEdBQTJCLFNBQVMsQ0FBQyxjQUFWLElBQTRCLEdBQUcsQ0FBQyxTQUFKLENBQWMsRUFBZCxFQUFrQixHQUFsQixDQUh2RCxDQUFBO0FBQUEsUUFJQSxTQUFTLENBQUMsV0FBVixHQUF3QixTQUFTLENBQUMsV0FBVixJQUF5QixPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWIsQ0FBQSxDQUpqRCxDQUFBO0FBQUEsUUFNQSxHQUFHLENBQUMsSUFBSixHQUFXLEVBQUEsR0FBYixTQUFTLENBQUMsY0FBRyxHQUE4QixxQkFOekMsQ0FBQTtBQUFBLFFBT0EsR0FBRyxDQUFDLFNBQUosR0FBZ0IsU0FBUyxDQUFDLFdBUDFCLENBQUE7QUFBQSxRQVFBLEdBQUcsQ0FBQyxRQUFKLENBQWEsWUFBYSxDQUFBLFNBQVMsQ0FBQyxPQUFWLENBQWtCLENBQUMsT0FBN0MsRUFBc0QsU0FBUyxDQUFDLE9BQWhFLEVBQXlFLFNBQVMsQ0FBQyxPQUFuRixDQVJBLENBQUE7ZUFTQSxVQVZVO01BQUEsQ0FBWCxDQUFBO0FBQUEsTUFZQSxHQUFBLEdBQU0sTUFBTSxDQUFDLFVBQVAsQ0FBa0IsSUFBbEIsQ0FaTixDQUFBO0FBQUEsTUFjQSxTQUFBLEdBQVksS0FBSyxDQUFDLEdBQU4sQ0FBVSxXQUFWLENBZFosQ0FBQTtBQUFBLE1BZUEsYUFBQSxHQUFxQixDQUFDLENBQUMsV0FBRixDQUFlLFNBQWYsQ0FBQSxJQUE4QixDQUFDLENBQUMsT0FBRixDQUFXLFNBQVgsQ0FBbkMsR0FBaUUsWUFBakUsR0FBbUYsU0FmbkcsQ0FBQTtBQWlCQSxNQUFBLElBQUcsYUFBQSxLQUFpQixZQUFwQjtBQUFzQyxRQUFBLFNBQUEsR0FBWSxFQUFaLENBQXRDO09BakJBO0FBQUEsTUFrQkEsU0FBUyxDQUFDLGFBQVYsR0FBMEIsU0FBUyxDQUFDLGFBQVYsSUFBMkIsR0FBRyxDQUFDLFNBQUosQ0FBYyxDQUFkLEVBQWlCLENBQWpCLENBbEJyRCxDQUFBO0FBb0JBLFdBQXFCLDBHQUFyQixHQUFBO0FBQUEsUUFBQSxRQUFBLENBQVMsQ0FBVCxDQUFBLENBQUE7QUFBQSxPQXBCQTtBQXNCQSxNQUFBLElBQUcsYUFBQSxLQUFpQixZQUFwQjtlQUFzQyxLQUFLLENBQUMsR0FBTixDQUFVLFdBQVYsRUFBdUIsU0FBdkIsRUFBa0M7QUFBQSxVQUFBLE1BQUEsRUFBUSxJQUFSO1NBQWxDLEVBQXRDO09BdkJPO0lBQUEsRUFOd0M7RUFBQSxDQUFqRCxDQUFBLENBQUE7QUFBQSIsImZpbGUiOiJjYXJkX2dlbmVyYXRvci9nZW5lcmF0b3JzL2ljb25zLWdlbmVyYXRvci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkBhcHAubW9kdWxlICdDYXJkR2VuZXJhdG9yLmdlbmVyYXRvcnMuaWNvbnNHZW4nLCAoSWNvbnNHZW4pIC0+XG5cblx0QG9wdGlvbnMgPSBcblx0XHRjb3VudGVyOiAwXG5cdFx0c3RhcnNBbW91bnQ6IDBcblx0XG5cdEBkcmF3ID0gKGNhbnZhcyxtb2RlbCxhcmdzLi4uKSAtPlxuXHRcdGRyYXdJY29uID0gLT5cblx0XHRcdGljb25zRGF0YS5pY29uTnVtID0gaWNvbnNEYXRhLmljb25OdW0gb3IgYXBwLmdldFJhbmRvbSAwLCBhcHBJY29uc0RhdGEubGVuZ3RoLTFcblx0XHRcdGljb25zRGF0YS5yYW5kb21YID0gaWNvbnNEYXRhLnJhbmRvbVggb3IgYXBwLmdldFJhbmRvbSA1LCBjYW52YXMud2lkdGhcblx0XHRcdGljb25zRGF0YS5yYW5kb21ZID0gaWNvbnNEYXRhLnJhbmRvbVkgb3IgYXBwLmdldFJhbmRvbSA1LCBjYW52YXMuaGVpZ2h0XG5cdFx0XHRpY29uc0RhdGEucmFuZG9tRm9udFNpemUgPSBpY29uc0RhdGEucmFuZG9tRm9udFNpemUgb3IgYXBwLmdldFJhbmRvbSAyMCwgMTAwXG5cdFx0XHRpY29uc0RhdGEucmFuZG9tQ29sb3IgPSBpY29uc0RhdGEucmFuZG9tQ29sb3Igb3IgS2luZXRpYy5VdGlsLmdldFJhbmRvbUNvbG9yKClcblxuXHRcdFx0Y3R4LmZvbnQgPSBcIiN7IGljb25zRGF0YS5yYW5kb21Gb250U2l6ZSB9cHggY2FyZGhvbGRlci1pY29uc1wiXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gaWNvbnNEYXRhLnJhbmRvbUNvbG9yXG5cdFx0XHRjdHguZmlsbFRleHQgYXBwSWNvbnNEYXRhW2ljb25zRGF0YS5pY29uTnVtXS5jb250ZW50LCBpY29uc0RhdGEucmFuZG9tWCwgaWNvbnNEYXRhLnJhbmRvbVlcblx0XHRcdGljb25zRGF0YVxuXG5cdFx0Y3R4ID0gY2FudmFzLmdldENvbnRleHQgJzJkJ1xuXG5cdFx0aWNvbnNEYXRhID0gbW9kZWwuZ2V0KCdpY29uc0RhdGEnKVxuXHRcdGljb25zRGF0YVR5cGUgPSBpZiAoIF8uaXNVbmRlZmluZWQoIGljb25zRGF0YSApIG9yIF8uaXNFbXB0eSggaWNvbnNEYXRhICkgKSB0aGVuICdub3RkZWZpbmVkJyBlbHNlICdkZWZpbmVkJyAjdGhpcyBpcyBuZWVkZWQgdG8gdXNlIGxpdHRsZSBsYXRlclxuXG5cdFx0aWYgaWNvbnNEYXRhVHlwZSBpcyAnbm90ZGVmaW5lZCcgdGhlbiBpY29uc0RhdGEgPSB7fVxuXHRcdGljb25zRGF0YS5hbW91bnRPZkljb25zID0gaWNvbnNEYXRhLmFtb3VudE9mSWNvbnMgb3IgYXBwLmdldFJhbmRvbSAxLCA2XG5cdFx0XG5cdFx0ZHJhd0ljb24oaSkgZm9yIGkgaW4gWzAuLi5pY29uc0RhdGEuYW1vdW50T2ZJY29uc11cblxuXHRcdGlmIGljb25zRGF0YVR5cGUgaXMgJ25vdGRlZmluZWQnIHRoZW4gbW9kZWwuc2V0ICdpY29uc0RhdGEnLCBpY29uc0RhdGEsIHNpbGVudDogdHJ1ZVxuXG5cbiJdfQ==