(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  window.app.module('CardGenerator', function(CardGenerator) {
    return CardGenerator.CardsView = (function(_super) {
      __extends(CardsView, _super);

      function CardsView() {
        this.select2choiseRemoved = __bind(this.select2choiseRemoved, this);
        this.select2ChoiseSelected = __bind(this.select2ChoiseSelected, this);
        this.stepPrev = __bind(this.stepPrev, this);
        this.stepNext = __bind(this.stepNext, this);
        this.submit = __bind(this.submit, this);
        this.changeStep = __bind(this.changeStep, this);
        this.randomRender = __bind(this.randomRender, this);
        this.onShow = __bind(this.onShow, this);
        return CardsView.__super__.constructor.apply(this, arguments);
      }

      CardsView.prototype.logging = false;

      CardsView.prototype.counter = 0;

      CardsView.prototype.className = 'card-generator-view';

      CardsView.prototype.ui = {
        'stepForm': '.step-form-controller-form',
        'mainInput': '.step-form-controller-form-input',
        'controlNext': '.step-form-controller-form-control.next',
        'controlPrev': '.step-form-controller-form-control.prev',
        'question': '.step-form-controller-form-label',
        'currentStep': '.step-form-controller-form-statusbar-current',
        'questionsQuantity': '.step-form-controller-form-statusbar-quantity'
      };

      CardsView.prototype.events = {
        'submit @ui.stepForm': 'submit',
        'select2-selecting @ui.mainInput': 'select2ChoiseSelected',
        'select2-removed @ui.mainInput': 'select2choiseRemoved',
        'click @ui.controlNext': 'stepNext',
        'click @ui.controlPrev': 'stepPrev'
      };

      CardsView.prototype.template = function(model) {
        return templatizer.cardGenerator.cardsGreed(this.model);
      };

      CardsView.prototype.initialize = function() {
        this.bind('all', function() {
          if (this.logging === true) {
            return console.log("CARDS COMPOSITE VIEW:\t", arguments);
          }
        });
        this.data = dataFromServer.appData;
        this.childViewContainer = '.cards';
        this.childView = CardGenerator.cards.CardView;
        this.state = new Backbone.Model();
        this.model = new CardGenerator.stepForm.StepFormModel();
        return this.collection = new CardGenerator.cards.CardsCollection();
      };

      CardsView.prototype.onShow = function() {
        var emails, names, phones, positions, questions, surnames;
        this.currentStep = this.model.get('currentStep');
        this.questions = this.data.questions;
        window.onkeydown = (function(_this) {
          return function(e) {
            switch (e.keyCode) {
              case 37:
                e.preventDefault();
                return _this.ui.controls.prev.trigger('click');
              case 39:
                e.preventDefault();
                return _this.ui.controls.next.trigger('click');
            }
          };
        })(this);
        this.names = [];
        this.surnames = [];
        names = this.data.names;
        emails = this.data.emails;
        phones = false;
        positions = this.data.positions;
        questions = this.data.questions;
        surnames = this.data.surnames;
        this.src = [names, surnames, emails, phones, positions];
        $(this.ui.mainInput).select2({
          width: '100%',
          placeholder: 'введите ответ',
          allowClear: true,
          maximumSelectionSize: 2,
          allowClear: true,
          initSelection: function(element, callback) {
            var data;
            data = [];
            $(element.val().split(",")).each(function() {
              data.push({
                id: this,
                text: this
              });
            });
            return callback(data);
          },
          tags: (function(_this) {
            return function() {
              if (_this.currentStep) {
                return _this.src[_this.currentStep - 1] || [];
              } else {
                return [];
              }
            };
          })(this),
          multiple: true
        });
        this.changeStep(1);
        return setTimeout((function(_this) {
          return function() {
            return setInterval(_this.randomRender, 5000);
          };
        })(this), 5000);
      };

      CardsView.prototype.randomRender = function() {
        var notLockedViews, randomView;
        notLockedViews = this.children.filter(function(view) {
          return view.model.get('is-locked') !== true;
        });
        randomView = notLockedViews[app.getRandom(0, notLockedViews.length - 1)];
        if (notLockedViews.length > 0 && randomView && !(randomView.model.get('is-hovered') || randomView.model.get('is-locked'))) {
          if (notLockedViews.length < 3) {
            this.previousViewCid = randomView.cid;
            return randomView.model.clear({
              silent: true
            }).set(randomView.model.defaults);
          } else {
            if (randomView.cid !== this.previousViewCid) {
              this.previousViewCid = randomView.cid;
              return randomView.model.clear({
                silent: true
              }).set(randomView.model.defaults);
            } else {
              return this.randomRender();
            }
          }
        }
      };

      CardsView.prototype.changeStep = function(step) {
        this.currentStep = step;
        this.model.set('formStep', step);
        this.ui.currentStep.text(this.currentStep + ' ');
        this.ui.questionsQuantity.text(this.questions.length);
        return this.ui.question.text(this.questions[this.currentStep - 1]);
      };

      CardsView.prototype.submit = function(e) {
        var formVal, questionNum;
        e.preventDefault();
        formVal = this.$('.step-form-controller-form-statusbar-value');
        questionNum = this.currentStep;
        questionNum++;
        formVal.width(100 / this.questions.length * (questionNum - 1) + '%');
        this.ui.mainInput.select2('val', '');
        if (questionNum === this.questions.length + 1) {
          console.info('The questions is over!');
          this.ui.question.text('Вопросы кончились!');
          this.completed = true;
          this.ui.mainInput.select2('val', '');
          this.ui.mainInput.select2('enable', false);
        } else {
          this.ui.mainInput.select2('enable', true);
          return this.changeStep(questionNum);
        }
      };

      CardsView.prototype.stepNext = function() {
        if (this.currentStep <= this.questions.length) {
          return this.ui.stepForm.trigger('submit');
        }
      };

      CardsView.prototype.stepPrev = function() {
        if (this.currentStep > 1) {
          this.currentStep = this.currentStep - 2;
          return this.ui.stepForm.trigger('submit');
        }
      };

      CardsView.prototype.select2ChoiseSelected = function(e) {
        console.log(this);
        switch (this.currentStep) {
          case 1:
            console.log("step: 1", e.object.sex);
            return this.collection.each(function(model, i) {
              if (!model.get('is-locked') || model.get('is-locked') === !true) {
                model.set('data.name', e.object.text);
                return model.set('data.sex', e.object.sex);
              }
            });
          case 2:
            console.log("step: 2");
            return this.collection.each(function(model, i) {
              if (!model.get('is-locked') || model.get('is-locked') === !true) {
                return model.set('data.surname', e.object.text);
              }
            });
          case 3:
            console.log("step: 3");
            return this.collection.each(function(model, i) {
              if (!model.get('is-locked') || model.get('is-locked') === !true) {
                return model.set('data.eMail', e.object.text);
              }
            });
          case 4:
            console.log("step: 4");
            return this.collection.each(function(model, i) {
              if (!model.get('is-locked') || model.get('is-locked') === !true) {
                return model.set('data.phone', e.object.text);
              }
            });
          case 5:
            console.log("step: 5");
            return this.collection.each(function(model, i) {
              if (!model.get('is-locked') || model.get('is-locked') === !true) {
                return model.set('data.position', e.object.text);
              }
            });
        }
      };

      CardsView.prototype.select2choiseRemoved = function(e) {
        if (e.choice.text === this.names[0]) {
          this.names.shift();
        }
        if (e.choice.text === this.names[1]) {
          this.names.pop();
        }
        if (this.currentStep === 1) {
          this.names = [];
        }
        if (this.currentStep === 2) {
          return this.surnames = [];
        }
      };

      return CardsView;

    })(Marionette.CompositeView);
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmRfZ2VuZXJhdG9yL1ZpZXcuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQTs7bVNBQUE7O0FBQUEsRUFBQSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQVgsQ0FBa0IsZUFBbEIsRUFBbUMsU0FBQyxhQUFELEdBQUE7V0FDNUIsYUFBYSxDQUFDO0FBQ25CLGtDQUFBLENBQUE7Ozs7Ozs7Ozs7OztPQUFBOztBQUFBLDBCQUFBLE9BQUEsR0FBUyxLQUFULENBQUE7O0FBQUEsMEJBQ0EsT0FBQSxHQUFTLENBRFQsQ0FBQTs7QUFBQSwwQkFHQSxTQUFBLEdBQVcscUJBSFgsQ0FBQTs7QUFBQSwwQkFLQSxFQUFBLEdBQ0M7QUFBQSxRQUFBLFVBQUEsRUFBc0IsNEJBQXRCO0FBQUEsUUFDQSxXQUFBLEVBQXNCLGtDQUR0QjtBQUFBLFFBRUEsYUFBQSxFQUFzQix5Q0FGdEI7QUFBQSxRQUdBLGFBQUEsRUFBc0IseUNBSHRCO0FBQUEsUUFJQSxVQUFBLEVBQXNCLGtDQUp0QjtBQUFBLFFBS0EsYUFBQSxFQUFzQiw4Q0FMdEI7QUFBQSxRQU1BLG1CQUFBLEVBQXNCLCtDQU50QjtPQU5ELENBQUE7O0FBQUEsMEJBY0EsTUFBQSxHQUNDO0FBQUEsUUFBQSxxQkFBQSxFQUFvQyxRQUFwQztBQUFBLFFBQ0EsaUNBQUEsRUFBb0MsdUJBRHBDO0FBQUEsUUFFQSwrQkFBQSxFQUFvQyxzQkFGcEM7QUFBQSxRQUdBLHVCQUFBLEVBQW9DLFVBSHBDO0FBQUEsUUFJQSx1QkFBQSxFQUFvQyxVQUpwQztPQWZELENBQUE7O0FBQUEsMEJBcUJBLFFBQUEsR0FBVSxTQUFDLEtBQUQsR0FBQTtlQUNULFdBQVcsQ0FBQyxhQUFhLENBQUMsVUFBMUIsQ0FBcUMsSUFBQyxDQUFBLEtBQXRDLEVBRFM7TUFBQSxDQXJCVixDQUFBOztBQUFBLDBCQXdCQSxVQUFBLEdBQVksU0FBQSxHQUFBO0FBQ1gsUUFBQSxJQUFDLENBQUEsSUFBRCxDQUFNLEtBQU4sRUFBYSxTQUFBLEdBQUE7QUFDWixVQUFBLElBQW9ELElBQUMsQ0FBQSxPQUFELEtBQVksSUFBaEU7bUJBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSx5QkFBWixFQUF1QyxTQUF2QyxFQUFBO1dBRFk7UUFBQSxDQUFiLENBQUEsQ0FBQTtBQUFBLFFBR0EsSUFBQyxDQUFBLElBQUQsR0FBUSxjQUFjLENBQUMsT0FIdkIsQ0FBQTtBQUFBLFFBS0EsSUFBQyxDQUFBLGtCQUFELEdBQXNCLFFBTHRCLENBQUE7QUFBQSxRQU1BLElBQUMsQ0FBQSxTQUFELEdBQWEsYUFBYSxDQUFDLEtBQUssQ0FBQyxRQU5qQyxDQUFBO0FBQUEsUUFRQSxJQUFDLENBQUEsS0FBRCxHQUFrQixJQUFBLFFBQVEsQ0FBQyxLQUFULENBQUEsQ0FSbEIsQ0FBQTtBQUFBLFFBU0EsSUFBQyxDQUFBLEtBQUQsR0FBa0IsSUFBQSxhQUFhLENBQUMsUUFBUSxDQUFDLGFBQXZCLENBQUEsQ0FUbEIsQ0FBQTtlQVVBLElBQUMsQ0FBQSxVQUFELEdBQWtCLElBQUEsYUFBYSxDQUFDLEtBQUssQ0FBQyxlQUFwQixDQUFBLEVBWFA7TUFBQSxDQXhCWixDQUFBOztBQUFBLDBCQXFDQSxNQUFBLEdBQVEsU0FBQSxHQUFBO0FBQ1AsWUFBQSxxREFBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLFdBQUQsR0FBZSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxhQUFYLENBQWYsQ0FBQTtBQUFBLFFBQ0EsSUFBQyxDQUFBLFNBQUQsR0FBYyxJQUFDLENBQUEsSUFBSSxDQUFDLFNBRHBCLENBQUE7QUFBQSxRQUdBLE1BQU0sQ0FBQyxTQUFQLEdBQW1CLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQyxDQUFELEdBQUE7QUFDbEIsb0JBQU8sQ0FBQyxDQUFDLE9BQVQ7QUFBQSxtQkFDTSxFQUROO0FBRUUsZ0JBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7dUJBQ0EsS0FBQyxDQUFBLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQWxCLENBQTBCLE9BQTFCLEVBSEY7QUFBQSxtQkFJTSxFQUpOO0FBS0UsZ0JBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7dUJBQ0EsS0FBQyxDQUFBLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQWxCLENBQTBCLE9BQTFCLEVBTkY7QUFBQSxhQURrQjtVQUFBLEVBQUE7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBSG5CLENBQUE7QUFBQSxRQVlBLElBQUMsQ0FBQSxLQUFELEdBQVMsRUFaVCxDQUFBO0FBQUEsUUFhQSxJQUFDLENBQUEsUUFBRCxHQUFZLEVBYlosQ0FBQTtBQUFBLFFBZUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FmZCxDQUFBO0FBQUEsUUFnQkEsTUFBQSxHQUFTLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFoQmYsQ0FBQTtBQUFBLFFBaUJBLE1BQUEsR0FBUyxLQWpCVCxDQUFBO0FBQUEsUUFrQkEsU0FBQSxHQUFZLElBQUMsQ0FBQSxJQUFJLENBQUMsU0FsQmxCLENBQUE7QUFBQSxRQW1CQSxTQUFBLEdBQVksSUFBQyxDQUFBLElBQUksQ0FBQyxTQW5CbEIsQ0FBQTtBQUFBLFFBb0JBLFFBQUEsR0FBVyxJQUFDLENBQUEsSUFBSSxDQUFDLFFBcEJqQixDQUFBO0FBQUEsUUFzQkEsSUFBQyxDQUFBLEdBQUQsR0FBTyxDQUFFLEtBQUYsRUFBUyxRQUFULEVBQW1CLE1BQW5CLEVBQTJCLE1BQTNCLEVBQW1DLFNBQW5DLENBdEJQLENBQUE7QUFBQSxRQXdCQSxDQUFBLENBQUcsSUFBQyxDQUFBLEVBQUUsQ0FBQyxTQUFQLENBQWtCLENBQUMsT0FBbkIsQ0FDQztBQUFBLFVBQUEsS0FBQSxFQUFPLE1BQVA7QUFBQSxVQUNBLFdBQUEsRUFBYyxlQURkO0FBQUEsVUFFQSxVQUFBLEVBQVksSUFGWjtBQUFBLFVBR0Esb0JBQUEsRUFBc0IsQ0FIdEI7QUFBQSxVQUlBLFVBQUEsRUFBWSxJQUpaO0FBQUEsVUFLQSxhQUFBLEVBQWdCLFNBQUMsT0FBRCxFQUFVLFFBQVYsR0FBQTtBQUNmLGdCQUFBLElBQUE7QUFBQSxZQUFBLElBQUEsR0FBTyxFQUFQLENBQUE7QUFBQSxZQUNBLENBQUEsQ0FBRSxPQUFPLENBQUMsR0FBUixDQUFBLENBQWEsQ0FBQyxLQUFkLENBQW9CLEdBQXBCLENBQUYsQ0FBMkIsQ0FBQyxJQUE1QixDQUFpQyxTQUFBLEdBQUE7QUFDaEMsY0FBQSxJQUFJLENBQUMsSUFBTCxDQUFVO0FBQUEsZ0JBQUMsRUFBQSxFQUFJLElBQUw7QUFBQSxnQkFBVyxJQUFBLEVBQU0sSUFBakI7ZUFBVixDQUFBLENBRGdDO1lBQUEsQ0FBakMsQ0FEQSxDQUFBO21CQUlBLFFBQUEsQ0FBUyxJQUFULEVBTGU7VUFBQSxDQUxoQjtBQUFBLFVBV0EsSUFBQSxFQUFNLENBQUEsU0FBQSxLQUFBLEdBQUE7bUJBQUEsU0FBQSxHQUFBO0FBQ0wsY0FBQSxJQUFHLEtBQUMsQ0FBQSxXQUFKO0FBQ0MsdUJBQU8sS0FBQyxDQUFBLEdBQUksQ0FBQSxLQUFDLENBQUEsV0FBRCxHQUFhLENBQWIsQ0FBTCxJQUF3QixFQUEvQixDQUREO2VBQUEsTUFBQTtBQUdDLHVCQUFPLEVBQVAsQ0FIRDtlQURLO1lBQUEsRUFBQTtVQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FYTjtBQUFBLFVBZ0JBLFFBQUEsRUFBVSxJQWhCVjtTQURELENBeEJBLENBQUE7QUFBQSxRQTJDQSxJQUFDLENBQUEsVUFBRCxDQUFZLENBQVosQ0EzQ0EsQ0FBQTtlQThDQSxVQUFBLENBQVcsQ0FBQSxTQUFBLEtBQUEsR0FBQTtpQkFBQSxTQUFBLEdBQUE7bUJBQ1YsV0FBQSxDQUFZLEtBQUMsQ0FBQSxZQUFiLEVBQTJCLElBQTNCLEVBRFU7VUFBQSxFQUFBO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFYLEVBRUUsSUFGRixFQS9DTztNQUFBLENBckNSLENBQUE7O0FBQUEsMEJBd0ZBLFlBQUEsR0FBYyxTQUFBLEdBQUE7QUFDYixZQUFBLDBCQUFBO0FBQUEsUUFBQSxjQUFBLEdBQWlCLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixTQUFDLElBQUQsR0FBQTtBQUNqQyxpQkFBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQVgsQ0FBZSxXQUFmLENBQUEsS0FBaUMsSUFBeEMsQ0FEaUM7UUFBQSxDQUFqQixDQUFqQixDQUFBO0FBQUEsUUFFQSxVQUFBLEdBQWEsY0FBZ0IsQ0FBQSxHQUFHLENBQUMsU0FBSixDQUFjLENBQWQsRUFBaUIsY0FBYyxDQUFDLE1BQWYsR0FBc0IsQ0FBdkMsQ0FBQSxDQUY3QixDQUFBO0FBR0EsUUFBQSxJQUFHLGNBQWMsQ0FBQyxNQUFmLEdBQXdCLENBQXhCLElBQThCLFVBQTlCLElBQTZDLENBQUEsQ0FBTSxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQWpCLENBQXFCLFlBQXJCLENBQUEsSUFBc0MsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFqQixDQUFxQixXQUFyQixDQUF4QyxDQUFwRDtBQUNDLFVBQUEsSUFBRyxjQUFjLENBQUMsTUFBZixHQUF3QixDQUEzQjtBQUNDLFlBQUEsSUFBQyxDQUFBLGVBQUQsR0FBbUIsVUFBVSxDQUFDLEdBQTlCLENBQUE7bUJBQ0EsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFqQixDQUF1QjtBQUFBLGNBQUMsTUFBQSxFQUFRLElBQVQ7YUFBdkIsQ0FBc0MsQ0FBQyxHQUF2QyxDQUEyQyxVQUFVLENBQUMsS0FBSyxDQUFDLFFBQTVELEVBRkQ7V0FBQSxNQUFBO0FBSUMsWUFBQSxJQUFHLFVBQVUsQ0FBQyxHQUFYLEtBQW9CLElBQUMsQ0FBQSxlQUF4QjtBQUNDLGNBQUEsSUFBQyxDQUFBLGVBQUQsR0FBbUIsVUFBVSxDQUFDLEdBQTlCLENBQUE7cUJBQ0EsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFqQixDQUF1QjtBQUFBLGdCQUFDLE1BQUEsRUFBUSxJQUFUO2VBQXZCLENBQXNDLENBQUMsR0FBdkMsQ0FBMkMsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUE1RCxFQUZEO2FBQUEsTUFBQTtxQkFJQyxJQUFDLENBQUEsWUFBRCxDQUFBLEVBSkQ7YUFKRDtXQUREO1NBSmE7TUFBQSxDQXhGZCxDQUFBOztBQUFBLDBCQXlHQSxVQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWixRQUFBLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBZixDQUFBO0FBQUEsUUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxVQUFYLEVBQXVCLElBQXZCLENBREEsQ0FBQTtBQUFBLFFBRUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBaEIsQ0FBcUIsSUFBQyxDQUFBLFdBQUQsR0FBYSxHQUFsQyxDQUZBLENBQUE7QUFBQSxRQUdBLElBQUMsQ0FBQSxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBdEIsQ0FBMkIsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUF0QyxDQUhBLENBQUE7ZUFJQSxJQUFDLENBQUEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFiLENBQWtCLElBQUMsQ0FBQSxTQUFVLENBQUEsSUFBQyxDQUFBLFdBQUQsR0FBYSxDQUFiLENBQTdCLEVBTFk7TUFBQSxDQXpHYixDQUFBOztBQUFBLDBCQWdIQSxNQUFBLEdBQVEsU0FBQyxDQUFELEdBQUE7QUFDUCxZQUFBLG9CQUFBO0FBQUEsUUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTtBQUFBLFFBQ0EsT0FBQSxHQUFVLElBQUMsQ0FBQSxDQUFELENBQUcsNENBQUgsQ0FEVixDQUFBO0FBQUEsUUFFQSxXQUFBLEdBQWMsSUFBQyxDQUFBLFdBRmYsQ0FBQTtBQUFBLFFBR0EsV0FBQSxFQUhBLENBQUE7QUFBQSxRQUlBLE9BQU8sQ0FBQyxLQUFSLENBQWUsR0FBQSxHQUFLLElBQUMsQ0FBQSxTQUFTLENBQUMsTUFBaEIsR0FBeUIsQ0FBQyxXQUFBLEdBQVksQ0FBYixDQUF6QixHQUEyQyxHQUExRCxDQUpBLENBQUE7QUFBQSxRQUtBLElBQUMsQ0FBQSxFQUFFLENBQUMsU0FBUyxDQUFDLE9BQWQsQ0FBc0IsS0FBdEIsRUFBNEIsRUFBNUIsQ0FMQSxDQUFBO0FBTUEsUUFBQSxJQUFHLFdBQUEsS0FBZSxJQUFDLENBQUEsU0FBUyxDQUFDLE1BQVgsR0FBa0IsQ0FBcEM7QUFFQyxVQUFBLE9BQU8sQ0FBQyxJQUFSLENBQWEsd0JBQWIsQ0FBQSxDQUFBO0FBQUEsVUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFiLENBQWtCLG9CQUFsQixDQURBLENBQUE7QUFBQSxVQUVBLElBQUMsQ0FBQSxTQUFELEdBQVcsSUFGWCxDQUFBO0FBQUEsVUFHQSxJQUFDLENBQUEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxPQUFkLENBQXNCLEtBQXRCLEVBQTRCLEVBQTVCLENBSEEsQ0FBQTtBQUFBLFVBSUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxTQUFTLENBQUMsT0FBZCxDQUFzQixRQUF0QixFQUFnQyxLQUFoQyxDQUpBLENBRkQ7U0FBQSxNQUFBO0FBU0MsVUFBQSxJQUFDLENBQUEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxPQUFkLENBQXNCLFFBQXRCLEVBQWdDLElBQWhDLENBQUEsQ0FBQTtpQkFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLFdBQVosRUFWRDtTQVBPO01BQUEsQ0FoSFIsQ0FBQTs7QUFBQSwwQkFtSUEsUUFBQSxHQUFXLFNBQUEsR0FBQTtBQUNWLFFBQUEsSUFBRyxJQUFDLENBQUEsV0FBRCxJQUFnQixJQUFDLENBQUEsU0FBUyxDQUFDLE1BQTlCO2lCQUNDLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQWIsQ0FBcUIsUUFBckIsRUFERDtTQURVO01BQUEsQ0FuSVgsQ0FBQTs7QUFBQSwwQkF1SUEsUUFBQSxHQUFXLFNBQUEsR0FBQTtBQUNWLFFBQUEsSUFBRyxJQUFDLENBQUEsV0FBRCxHQUFlLENBQWxCO0FBQ0MsVUFBQSxJQUFDLENBQUEsV0FBRCxHQUFlLElBQUMsQ0FBQSxXQUFELEdBQWEsQ0FBNUIsQ0FBQTtpQkFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFiLENBQXFCLFFBQXJCLEVBRkQ7U0FEVTtNQUFBLENBdklYLENBQUE7O0FBQUEsMEJBNElBLHFCQUFBLEdBQXVCLFNBQUMsQ0FBRCxHQUFBO0FBQ3RCLFFBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxJQUFaLENBQUEsQ0FBQTtBQUNBLGdCQUFPLElBQUMsQ0FBQSxXQUFSO0FBQUEsZUFDTSxDQUROO0FBRUUsWUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLFNBQVosRUFBc0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUEvQixDQUFBLENBQUE7bUJBQ0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFNBQUMsS0FBRCxFQUFPLENBQVAsR0FBQTtBQUNoQixjQUFBLElBQUcsQ0FBQSxLQUFNLENBQUMsR0FBTixDQUFVLFdBQVYsQ0FBRCxJQUEyQixLQUFLLENBQUMsR0FBTixDQUFVLFdBQVYsQ0FBQSxLQUEwQixDQUFBLElBQXhEO0FBQ0MsZ0JBQUEsS0FBSyxDQUFDLEdBQU4sQ0FBVSxXQUFWLEVBQXNCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBL0IsQ0FBQSxDQUFBO3VCQUNBLEtBQUssQ0FBQyxHQUFOLENBQVUsVUFBVixFQUFxQixDQUFDLENBQUMsTUFBTSxDQUFDLEdBQTlCLEVBRkQ7ZUFEZ0I7WUFBQSxDQUFqQixFQUhGO0FBQUEsZUFPTSxDQVBOO0FBUUUsWUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLFNBQVosQ0FBQSxDQUFBO21CQUNBLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBWixDQUFpQixTQUFDLEtBQUQsRUFBTyxDQUFQLEdBQUE7QUFDaEIsY0FBQSxJQUFHLENBQUEsS0FBTSxDQUFDLEdBQU4sQ0FBVSxXQUFWLENBQUQsSUFBMkIsS0FBSyxDQUFDLEdBQU4sQ0FBVSxXQUFWLENBQUEsS0FBMEIsQ0FBQSxJQUF4RDt1QkFDQyxLQUFLLENBQUMsR0FBTixDQUFVLGNBQVYsRUFBeUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFsQyxFQUREO2VBRGdCO1lBQUEsQ0FBakIsRUFURjtBQUFBLGVBWU0sQ0FaTjtBQWFFLFlBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFaLENBQUEsQ0FBQTttQkFDQSxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsU0FBQyxLQUFELEVBQU8sQ0FBUCxHQUFBO0FBQ2hCLGNBQUEsSUFBRyxDQUFBLEtBQU0sQ0FBQyxHQUFOLENBQVUsV0FBVixDQUFELElBQTJCLEtBQUssQ0FBQyxHQUFOLENBQVUsV0FBVixDQUFBLEtBQTBCLENBQUEsSUFBeEQ7dUJBQ0MsS0FBSyxDQUFDLEdBQU4sQ0FBVSxZQUFWLEVBQXVCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBaEMsRUFERDtlQURnQjtZQUFBLENBQWpCLEVBZEY7QUFBQSxlQWlCTSxDQWpCTjtBQWtCRSxZQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBWixDQUFBLENBQUE7bUJBQ0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFNBQUMsS0FBRCxFQUFPLENBQVAsR0FBQTtBQUNoQixjQUFBLElBQUcsQ0FBQSxLQUFNLENBQUMsR0FBTixDQUFVLFdBQVYsQ0FBRCxJQUEyQixLQUFLLENBQUMsR0FBTixDQUFVLFdBQVYsQ0FBQSxLQUEwQixDQUFBLElBQXhEO3VCQUNDLEtBQUssQ0FBQyxHQUFOLENBQVUsWUFBVixFQUF1QixDQUFDLENBQUMsTUFBTSxDQUFDLElBQWhDLEVBREQ7ZUFEZ0I7WUFBQSxDQUFqQixFQW5CRjtBQUFBLGVBc0JNLENBdEJOO0FBdUJFLFlBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFaLENBQUEsQ0FBQTttQkFDQSxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsU0FBQyxLQUFELEVBQU8sQ0FBUCxHQUFBO0FBQ2hCLGNBQUEsSUFBRyxDQUFBLEtBQU0sQ0FBQyxHQUFOLENBQVUsV0FBVixDQUFELElBQTJCLEtBQUssQ0FBQyxHQUFOLENBQVUsV0FBVixDQUFBLEtBQTBCLENBQUEsSUFBeEQ7dUJBQ0MsS0FBSyxDQUFDLEdBQU4sQ0FBVSxlQUFWLEVBQTBCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBbkMsRUFERDtlQURnQjtZQUFBLENBQWpCLEVBeEJGO0FBQUEsU0FGc0I7TUFBQSxDQTVJdkIsQ0FBQTs7QUFBQSwwQkEwS0Esb0JBQUEsR0FBc0IsU0FBQyxDQUFELEdBQUE7QUFDckIsUUFBQSxJQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBVCxLQUFpQixJQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBM0I7QUFDQyxVQUFBLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxDQUFBLENBQUEsQ0FERDtTQUFBO0FBR0EsUUFBQSxJQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBVCxLQUFpQixJQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBM0I7QUFDQyxVQUFBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBQUEsQ0FERDtTQUhBO0FBS0EsUUFBQSxJQUFHLElBQUMsQ0FBQSxXQUFELEtBQWdCLENBQW5CO0FBQ0MsVUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLEVBQVQsQ0FERDtTQUxBO0FBT0EsUUFBQSxJQUFHLElBQUMsQ0FBQSxXQUFELEtBQWdCLENBQW5CO2lCQUNDLElBQUMsQ0FBQSxRQUFELEdBQVksR0FEYjtTQVJxQjtNQUFBLENBMUt0QixDQUFBOzt1QkFBQTs7T0FEcUMsVUFBVSxDQUFDLGVBRGY7RUFBQSxDQUFuQyxDQUFBLENBQUE7QUFBQSIsImZpbGUiOiJjYXJkX2dlbmVyYXRvci9WaWV3LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFwcC5tb2R1bGUgJ0NhcmRHZW5lcmF0b3InLCAoQ2FyZEdlbmVyYXRvcikgLT5cblx0Y2xhc3MgQ2FyZEdlbmVyYXRvci5DYXJkc1ZpZXcgZXh0ZW5kcyBNYXJpb25ldHRlLkNvbXBvc2l0ZVZpZXdcblx0XHRsb2dnaW5nOiBvZmZcblx0XHRjb3VudGVyOiAwXG5cblx0XHRjbGFzc05hbWU6ICdjYXJkLWdlbmVyYXRvci12aWV3J1xuXG5cdFx0dWk6XG5cdFx0XHQnc3RlcEZvcm0nICAgICAgICAgIDogJy5zdGVwLWZvcm0tY29udHJvbGxlci1mb3JtJ1xuXHRcdFx0J21haW5JbnB1dCcgICAgICAgICA6ICcuc3RlcC1mb3JtLWNvbnRyb2xsZXItZm9ybS1pbnB1dCdcblx0XHRcdCdjb250cm9sTmV4dCcgICAgICAgOiAnLnN0ZXAtZm9ybS1jb250cm9sbGVyLWZvcm0tY29udHJvbC5uZXh0J1xuXHRcdFx0J2NvbnRyb2xQcmV2JyAgICAgICA6ICcuc3RlcC1mb3JtLWNvbnRyb2xsZXItZm9ybS1jb250cm9sLnByZXYnXG5cdFx0XHQncXVlc3Rpb24nICAgICAgICAgIDogJy5zdGVwLWZvcm0tY29udHJvbGxlci1mb3JtLWxhYmVsJ1xuXHRcdFx0J2N1cnJlbnRTdGVwJyAgICAgICA6ICcuc3RlcC1mb3JtLWNvbnRyb2xsZXItZm9ybS1zdGF0dXNiYXItY3VycmVudCdcblx0XHRcdCdxdWVzdGlvbnNRdWFudGl0eScgOiAnLnN0ZXAtZm9ybS1jb250cm9sbGVyLWZvcm0tc3RhdHVzYmFyLXF1YW50aXR5J1xuXHRcdFx0XHRcdFxuXHRcdGV2ZW50czogXG5cdFx0XHQnc3VibWl0IEB1aS5zdGVwRm9ybScgICAgICAgICAgICAgOiAnc3VibWl0J1xuXHRcdFx0J3NlbGVjdDItc2VsZWN0aW5nIEB1aS5tYWluSW5wdXQnIDogJ3NlbGVjdDJDaG9pc2VTZWxlY3RlZCdcblx0XHRcdCdzZWxlY3QyLXJlbW92ZWQgQHVpLm1haW5JbnB1dCcgICA6ICdzZWxlY3QyY2hvaXNlUmVtb3ZlZCdcblx0XHRcdCdjbGljayBAdWkuY29udHJvbE5leHQnICAgICAgICAgICA6ICdzdGVwTmV4dCdcblx0XHRcdCdjbGljayBAdWkuY29udHJvbFByZXYnICAgICAgICAgICA6ICdzdGVwUHJldidcblxuXHRcdHRlbXBsYXRlOiAobW9kZWwpIC0+XG5cdFx0XHR0ZW1wbGF0aXplci5jYXJkR2VuZXJhdG9yLmNhcmRzR3JlZWQgQG1vZGVsXG5cblx0XHRpbml0aWFsaXplOiAtPlxuXHRcdFx0QGJpbmQgJ2FsbCcsIC0+XG5cdFx0XHRcdGNvbnNvbGUubG9nIFwiQ0FSRFMgQ09NUE9TSVRFIFZJRVc6XFx0XCIsIGFyZ3VtZW50cyBpZiBAbG9nZ2luZyBpcyBvblxuXHRcdFx0XG5cdFx0XHRAZGF0YSA9IGRhdGFGcm9tU2VydmVyLmFwcERhdGFcblxuXHRcdFx0QGNoaWxkVmlld0NvbnRhaW5lciA9ICcuY2FyZHMnXG5cdFx0XHRAY2hpbGRWaWV3ID0gQ2FyZEdlbmVyYXRvci5jYXJkcy5DYXJkVmlld1xuXHRcdFx0XG5cdFx0XHRAc3RhdGUgICAgICA9IG5ldyBCYWNrYm9uZS5Nb2RlbCgpXG5cdFx0XHRAbW9kZWwgICAgICA9IG5ldyBDYXJkR2VuZXJhdG9yLnN0ZXBGb3JtLlN0ZXBGb3JtTW9kZWwoKVxuXHRcdFx0QGNvbGxlY3Rpb24gPSBuZXcgQ2FyZEdlbmVyYXRvci5jYXJkcy5DYXJkc0NvbGxlY3Rpb24oKVxuXG5cdFx0b25TaG93OiA9PlxuXHRcdFx0QGN1cnJlbnRTdGVwID0gQG1vZGVsLmdldCAnY3VycmVudFN0ZXAnXG5cdFx0XHRAcXVlc3Rpb25zICA9IEBkYXRhLnF1ZXN0aW9uc1xuXG5cdFx0XHR3aW5kb3cub25rZXlkb3duID0gKGUpID0+XG5cdFx0XHRcdHN3aXRjaCBlLmtleUNvZGVcblx0XHRcdFx0XHR3aGVuIDM3XG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0XHRcdEB1aS5jb250cm9scy5wcmV2LnRyaWdnZXIgJ2NsaWNrJ1xuXHRcdFx0XHRcdHdoZW4gMzlcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKVxuXHRcdFx0XHRcdFx0QHVpLmNvbnRyb2xzLm5leHQudHJpZ2dlciAnY2xpY2snXG5cblx0XHRcdEBuYW1lcyA9IFtdXG5cdFx0XHRAc3VybmFtZXMgPSBbXVxuXG5cdFx0XHRuYW1lcyA9IEBkYXRhLm5hbWVzXG5cdFx0XHRlbWFpbHMgPSBAZGF0YS5lbWFpbHNcblx0XHRcdHBob25lcyA9IGZhbHNlXG5cdFx0XHRwb3NpdGlvbnMgPSBAZGF0YS5wb3NpdGlvbnNcblx0XHRcdHF1ZXN0aW9ucyA9IEBkYXRhLnF1ZXN0aW9uc1xuXHRcdFx0c3VybmFtZXMgPSBAZGF0YS5zdXJuYW1lc1xuXG5cdFx0XHRAc3JjID0gWyBuYW1lcywgc3VybmFtZXMsIGVtYWlscywgcGhvbmVzLCBwb3NpdGlvbnNdIFxuXG5cdFx0XHQkKCBAdWkubWFpbklucHV0ICkuc2VsZWN0MlxuXHRcdFx0XHR3aWR0aDogJzEwMCUnXG5cdFx0XHRcdHBsYWNlaG9sZGVyIDogJ9Cy0LLQtdC00LjRgtC1INC+0YLQstC10YInXG5cdFx0XHRcdGFsbG93Q2xlYXI6IHRydWVcblx0XHRcdFx0bWF4aW11bVNlbGVjdGlvblNpemU6IDJcblx0XHRcdFx0YWxsb3dDbGVhcjogdHJ1ZVxuXHRcdFx0XHRpbml0U2VsZWN0aW9uIDogKGVsZW1lbnQsIGNhbGxiYWNrKSAtPlxuXHRcdFx0XHRcdGRhdGEgPSBbXVxuXHRcdFx0XHRcdCQoZWxlbWVudC52YWwoKS5zcGxpdChcIixcIikpLmVhY2ggLT5cblx0XHRcdFx0XHRcdGRhdGEucHVzaCh7aWQ6IHRoaXMsIHRleHQ6IHRoaXN9KVxuXHRcdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdFx0Y2FsbGJhY2soZGF0YSlcblx0XHRcdFx0dGFnczogPT5cblx0XHRcdFx0XHRpZiBAY3VycmVudFN0ZXBcblx0XHRcdFx0XHRcdHJldHVybiBAc3JjW0BjdXJyZW50U3RlcC0xXSBvciBbXVxuXHRcdFx0XHRcdGVsc2UgXG5cdFx0XHRcdFx0XHRyZXR1cm4gW11cblx0XHRcdFx0bXVsdGlwbGU6IHRydWVcblxuXHRcdFx0QGNoYW5nZVN0ZXAoMSlcblxuXHRcdFx0IyBAcmFuZG9tUmVuZGVyKClcblx0XHRcdHNldFRpbWVvdXQgPT5cblx0XHRcdFx0c2V0SW50ZXJ2YWwgQHJhbmRvbVJlbmRlciwgNTAwMFxuXHRcdFx0LCA1MDAwXHRcblxuXHRcdHJhbmRvbVJlbmRlcjogPT5cblx0XHRcdG5vdExvY2tlZFZpZXdzID0gQGNoaWxkcmVuLmZpbHRlciAodmlldykgLT5cblx0XHRcdFx0cmV0dXJuIHZpZXcubW9kZWwuZ2V0KCdpcy1sb2NrZWQnKSBpc250IHRydWVcblx0XHRcdHJhbmRvbVZpZXcgPSBub3RMb2NrZWRWaWV3c1sgYXBwLmdldFJhbmRvbSgwLCBub3RMb2NrZWRWaWV3cy5sZW5ndGgtMSkgXVxuXHRcdFx0aWYgbm90TG9ja2VkVmlld3MubGVuZ3RoID4gMCBhbmQgcmFuZG9tVmlldyBhbmQgbm90ICggcmFuZG9tVmlldy5tb2RlbC5nZXQoJ2lzLWhvdmVyZWQnKSBvciByYW5kb21WaWV3Lm1vZGVsLmdldCgnaXMtbG9ja2VkJykgKVxuXHRcdFx0XHRpZiBub3RMb2NrZWRWaWV3cy5sZW5ndGggPCAzXG5cdFx0XHRcdFx0QHByZXZpb3VzVmlld0NpZCA9IHJhbmRvbVZpZXcuY2lkXG5cdFx0XHRcdFx0cmFuZG9tVmlldy5tb2RlbC5jbGVhcih7c2lsZW50OiB0cnVlfSkuc2V0KHJhbmRvbVZpZXcubW9kZWwuZGVmYXVsdHMpXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRpZiByYW5kb21WaWV3LmNpZCBpc250IEBwcmV2aW91c1ZpZXdDaWRcblx0XHRcdFx0XHRcdEBwcmV2aW91c1ZpZXdDaWQgPSByYW5kb21WaWV3LmNpZFxuXHRcdFx0XHRcdFx0cmFuZG9tVmlldy5tb2RlbC5jbGVhcih7c2lsZW50OiB0cnVlfSkuc2V0KHJhbmRvbVZpZXcubW9kZWwuZGVmYXVsdHMpXG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0QHJhbmRvbVJlbmRlcigpXG5cblxuXG5cdFx0Y2hhbmdlU3RlcCA6IChzdGVwKSA9PlxuXHRcdFx0QGN1cnJlbnRTdGVwID0gc3RlcFxuXHRcdFx0QG1vZGVsLnNldCAnZm9ybVN0ZXAnLCBzdGVwXG5cdFx0XHRAdWkuY3VycmVudFN0ZXAudGV4dChAY3VycmVudFN0ZXArJyAnKVxuXHRcdFx0QHVpLnF1ZXN0aW9uc1F1YW50aXR5LnRleHQoQHF1ZXN0aW9ucy5sZW5ndGgpXG5cdFx0XHRAdWkucXVlc3Rpb24udGV4dChAcXVlc3Rpb25zW0BjdXJyZW50U3RlcC0xXSlcblxuXHRcdHN1Ym1pdDogKGUpID0+XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRcdGZvcm1WYWwgPSBAJCgnLnN0ZXAtZm9ybS1jb250cm9sbGVyLWZvcm0tc3RhdHVzYmFyLXZhbHVlJylcblx0XHRcdHF1ZXN0aW9uTnVtID0gQGN1cnJlbnRTdGVwXG5cdFx0XHRxdWVzdGlvbk51bSsrXG5cdFx0XHRmb3JtVmFsLndpZHRoICgxMDAvIEBxdWVzdGlvbnMubGVuZ3RoICogKHF1ZXN0aW9uTnVtLTEpICsgJyUnKVxuXHRcdFx0QHVpLm1haW5JbnB1dC5zZWxlY3QyKCd2YWwnLCcnKVxuXHRcdFx0aWYgcXVlc3Rpb25OdW0gaXMgQHF1ZXN0aW9ucy5sZW5ndGgrMVxuXG5cdFx0XHRcdGNvbnNvbGUuaW5mbygnVGhlIHF1ZXN0aW9ucyBpcyBvdmVyIScpXG5cdFx0XHRcdEB1aS5xdWVzdGlvbi50ZXh0KCfQktC+0L/RgNC+0YHRiyDQutC+0L3Rh9C40LvQuNGB0YwhJylcblx0XHRcdFx0QGNvbXBsZXRlZD10cnVlXG5cdFx0XHRcdEB1aS5tYWluSW5wdXQuc2VsZWN0MiAndmFsJywnJ1xuXHRcdFx0XHRAdWkubWFpbklucHV0LnNlbGVjdDIgJ2VuYWJsZScsIGZhbHNlXG5cdFx0XHRcdHJldHVyblxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRAdWkubWFpbklucHV0LnNlbGVjdDIgJ2VuYWJsZScsIHRydWVcblx0XHRcdFx0QGNoYW5nZVN0ZXAocXVlc3Rpb25OdW0pXG5cblx0XHRzdGVwTmV4dCA6ID0+XG5cdFx0XHRpZiBAY3VycmVudFN0ZXAgPD0gQHF1ZXN0aW9ucy5sZW5ndGhcblx0XHRcdFx0QHVpLnN0ZXBGb3JtLnRyaWdnZXIgJ3N1Ym1pdCdcblxuXHRcdHN0ZXBQcmV2IDogPT5cblx0XHRcdGlmIEBjdXJyZW50U3RlcCA+IDFcblx0XHRcdFx0QGN1cnJlbnRTdGVwID0gQGN1cnJlbnRTdGVwLTJcblx0XHRcdFx0QHVpLnN0ZXBGb3JtLnRyaWdnZXIgJ3N1Ym1pdCdcblxuXHRcdHNlbGVjdDJDaG9pc2VTZWxlY3RlZDogKGUpID0+IFxuXHRcdFx0Y29uc29sZS5sb2cgQFxuXHRcdFx0c3dpdGNoIEBjdXJyZW50U3RlcFxuXHRcdFx0XHR3aGVuIDFcblx0XHRcdFx0XHRjb25zb2xlLmxvZyBcInN0ZXA6IDFcIixlLm9iamVjdC5zZXhcblx0XHRcdFx0XHRAY29sbGVjdGlvbi5lYWNoIChtb2RlbCxpKSAtPlxuXHRcdFx0XHRcdFx0aWYgIW1vZGVsLmdldCgnaXMtbG9ja2VkJykgb3IgbW9kZWwuZ2V0KCdpcy1sb2NrZWQnKSBpcyBub3QgdHJ1ZVxuXHRcdFx0XHRcdFx0XHRtb2RlbC5zZXQoJ2RhdGEubmFtZScsZS5vYmplY3QudGV4dClcblx0XHRcdFx0XHRcdFx0bW9kZWwuc2V0KCdkYXRhLnNleCcsZS5vYmplY3Quc2V4KVxuXHRcdFx0XHR3aGVuIDJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyBcInN0ZXA6IDJcIlxuXHRcdFx0XHRcdEBjb2xsZWN0aW9uLmVhY2ggKG1vZGVsLGkpIC0+XG5cdFx0XHRcdFx0XHRpZiAhbW9kZWwuZ2V0KCdpcy1sb2NrZWQnKSBvciBtb2RlbC5nZXQoJ2lzLWxvY2tlZCcpIGlzIG5vdCB0cnVlXG5cdFx0XHRcdFx0XHRcdG1vZGVsLnNldCgnZGF0YS5zdXJuYW1lJyxlLm9iamVjdC50ZXh0KVxuXHRcdFx0XHR3aGVuIDNcblx0XHRcdFx0XHRjb25zb2xlLmxvZyBcInN0ZXA6IDNcIlxuXHRcdFx0XHRcdEBjb2xsZWN0aW9uLmVhY2ggKG1vZGVsLGkpIC0+XG5cdFx0XHRcdFx0XHRpZiAhbW9kZWwuZ2V0KCdpcy1sb2NrZWQnKSBvciBtb2RlbC5nZXQoJ2lzLWxvY2tlZCcpIGlzIG5vdCB0cnVlXG5cdFx0XHRcdFx0XHRcdG1vZGVsLnNldCgnZGF0YS5lTWFpbCcsZS5vYmplY3QudGV4dClcblx0XHRcdFx0d2hlbiA0XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgXCJzdGVwOiA0XCJcblx0XHRcdFx0XHRAY29sbGVjdGlvbi5lYWNoIChtb2RlbCxpKSAtPlxuXHRcdFx0XHRcdFx0aWYgIW1vZGVsLmdldCgnaXMtbG9ja2VkJykgb3IgbW9kZWwuZ2V0KCdpcy1sb2NrZWQnKSBpcyBub3QgdHJ1ZVxuXHRcdFx0XHRcdFx0XHRtb2RlbC5zZXQoJ2RhdGEucGhvbmUnLGUub2JqZWN0LnRleHQpXG5cdFx0XHRcdHdoZW4gNVxuXHRcdFx0XHRcdGNvbnNvbGUubG9nIFwic3RlcDogNVwiXG5cdFx0XHRcdFx0QGNvbGxlY3Rpb24uZWFjaCAobW9kZWwsaSkgLT5cblx0XHRcdFx0XHRcdGlmICFtb2RlbC5nZXQoJ2lzLWxvY2tlZCcpIG9yIG1vZGVsLmdldCgnaXMtbG9ja2VkJykgaXMgbm90IHRydWVcblx0XHRcdFx0XHRcdFx0bW9kZWwuc2V0KCdkYXRhLnBvc2l0aW9uJyxlLm9iamVjdC50ZXh0KVxuXG5cdFx0c2VsZWN0MmNob2lzZVJlbW92ZWQ6IChlKSA9PlxuXHRcdFx0aWYgZS5jaG9pY2UudGV4dCBpcyBAbmFtZXNbMF1cblx0XHRcdFx0QG5hbWVzLnNoaWZ0KClcblxuXHRcdFx0aWYgZS5jaG9pY2UudGV4dCBpcyBAbmFtZXNbMV1cblx0XHRcdFx0QG5hbWVzLnBvcCgpXG5cdFx0XHRpZiBAY3VycmVudFN0ZXAgaXMgMVxuXHRcdFx0XHRAbmFtZXMgPSBbXVxuXHRcdFx0aWYgQGN1cnJlbnRTdGVwIGlzIDJcblx0XHRcdFx0QHN1cm5hbWVzID0gW11cblxuIl19