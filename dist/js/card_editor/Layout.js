(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  this.app.module('CardEditor', function(CardEditor) {
    var AbstractShapeModel, EditorModel, EditorState, LayerCollection, LayerModel, ShapeCollection;
    AbstractShapeModel = (function(_super) {
      __extends(AbstractShapeModel, _super);

      function AbstractShapeModel() {
        return AbstractShapeModel.__super__.constructor.apply(this, arguments);
      }

      return AbstractShapeModel;

    })(Backbone.Model);
    ShapeCollection = (function(_super) {
      __extends(ShapeCollection, _super);

      function ShapeCollection() {
        return ShapeCollection.__super__.constructor.apply(this, arguments);
      }

      ShapeCollection.prototype.model = AbstractShapeModel;

      return ShapeCollection;

    })(Backbone.Collection);
    LayerModel = (function(_super) {
      __extends(LayerModel, _super);

      function LayerModel() {
        return LayerModel.__super__.constructor.apply(this, arguments);
      }

      LayerModel.prototype.defaults = {
        layerName: 'Default',
        shapeCollection: new ShapeCollection()
      };

      return LayerModel;

    })(Backbone.Model);
    LayerCollection = (function(_super) {
      __extends(LayerCollection, _super);

      function LayerCollection() {
        return LayerCollection.__super__.constructor.apply(this, arguments);
      }

      LayerCollection.prototype.model = LayerModel;

      return LayerCollection;

    })(Backbone.Collection);
    EditorModel = (function(_super) {
      __extends(EditorModel, _super);

      function EditorModel() {
        return EditorModel.__super__.constructor.apply(this, arguments);
      }

      EditorModel.prototype.defaults = {
        layerCollection: new LayerCollection()
      };

      return EditorModel;

    })(Backbone.Model);
    EditorState = (function(_super) {
      __extends(EditorState, _super);

      function EditorState() {
        return EditorState.__super__.constructor.apply(this, arguments);
      }

      EditorState.prototype.defaults = {
        currentLayer: {}
      };

      return EditorState;

    })(Backbone.Model);
    return CardEditor.CardEditorLayout = (function(_super) {
      __extends(CardEditorLayout, _super);

      function CardEditorLayout() {
        this.draw = __bind(this.draw, this);
        this.drawRandomBackgroundButton = __bind(this.drawRandomBackgroundButton, this);
        this.onRemoveShape = __bind(this.onRemoveShape, this);
        this.onAddShape = __bind(this.onAddShape, this);
        this.removeLayer = __bind(this.removeLayer, this);
        this.addLayer = __bind(this.addLayer, this);
        this.saveGeneratedCardToImage = __bind(this.saveGeneratedCardToImage, this);
        this.resize = __bind(this.resize, this);
        this.onShow = __bind(this.onShow, this);
        return CardEditorLayout.__super__.constructor.apply(this, arguments);
      }

      CardEditorLayout.prototype.logging = true;

      CardEditorLayout.prototype.counter = 0;

      CardEditorLayout.prototype.className = 'card-editor-layout';

      CardEditorLayout.prototype.ui = {
        'canvasContainer': '#canvas-container',
        'drawRandomBackgroundButton': '.draw-random-background',
        'saveImageFileButton': '.save-to-image'
      };

      CardEditorLayout.prototype.events = {
        'click @ui.drawRandomBackgroundButton': 'drawRandomBackgroundButton',
        'click @ui.saveImageFileButton': 'saveGeneratedCardToImage'
      };

      CardEditorLayout.prototype.regions = {
        panel1: '#panel-1',
        panel2: '#panel-2',
        panel3: '#panel-3'
      };

      CardEditorLayout.prototype.initialize = function() {
        this.bind('all', function() {
          if (this.logging === true) {
            return console.log("CARD EDITOR LAYOUT:\t", arguments);
          }
        });
        this.editorState = new EditorState();
        return this.model = new EditorModel();
      };

      CardEditorLayout.prototype.template = function(model) {
        return templatizer.cardEditor.editor(this.model);
      };

      CardEditorLayout.prototype.onShow = function() {
        var layer, stageHeight, stageParams, stageWidth;
        this.listenTo(app, 'resize', this.resize);
        stageWidth = this.ui.canvasContainer.width();
        stageHeight = this.ui.canvasContainer.height();
        this.stage = new Kinetic.Stage({
          container: "canvas-container",
          width: stageWidth,
          height: stageWidth * 0.5625
        });
        stageParams = {
          scale: this.stage.scale(),
          width: this.ui.canvasContainer.innerWidth(),
          height: this.ui.canvasContainer.innerHeight()
        };
        this.editorState.set('stageParams', stageParams);
        this.panel1.show(new CardEditor.views.LayersPanel({
          state: this.editorState,
          model: this.model
        }));
        this.panel2.show(new CardEditor.views.LayerChildsPanel({
          state: this.editorState,
          model: this.model
        }));
        this.listenTo(this.model, 'change', this.draw);
        this.listenTo(this.model.get('layerCollection'), 'add', this.addLayer);
        this.listenTo(this.model.get('layerCollection'), 'remove', this.removeLayer);
        this.listenTo(this.model.get('layerCollection'), 'reset set sync fetch', this.draw);
        if (this.model.get('layerCollection').length === 0) {
          this.model.get('layerCollection').add({
            layerName: "Фон"
          });
        }
        if (this.model.get('layerCollection').length === 1) {
          this.model.get('layerCollection').add({
            layerName: "Слой " + (this.model.get('layerCollection').length)
          });
        }
        this.editorState.set('currentLayer', this.model.get('layerCollection').models[0]);
        console.log('current layer', this.editorState.get('currentLayer'));
        layer = this.stage.children[0];
        app.CardGenerator.generators.gradientGen.draw(layer.canvas._canvas, new app.CardGenerator.cards.CardModel());
        this.listenTo(this.editorState.get('currentLayer').get('shapeCollection'), 'add', this.onAddShape);
        this.listenTo(this.editorState.get('currentLayer').get('shapeCollection'), 'remove', this.onRemoveShape);
        this.listenTo(this.editorState.get('currentLayer').get('shapeCollection'), 'reset set sync fetch', this.draw);
        return this.draw();
      };

      CardEditorLayout.prototype.resize = function() {
        var newStageParams, stageParams, xScale, yScale;
        this.trigger('resize');
        stageParams = this.editorState.get('stageParams');
        newStageParams = {};
        newStageParams.width = this.ui.canvasContainer.innerWidth();
        newStageParams.height = newStageParams.width * 0.5625;
        xScale = (newStageParams.width / stageParams.width) * stageParams.scale.x;
        yScale = (newStageParams.height / stageParams.height) * stageParams.scale.y;
        newStageParams.scale = {
          x: xScale,
          y: yScale
        };
        this.stage.setWidth(newStageParams.width);
        this.stage.setHeight(newStageParams.height);
        this.stage.setScale(newStageParams.scale);
        this.editorState.set('stageParams', newStageParams);
        return this.draw();
      };

      CardEditorLayout.prototype.saveGeneratedCardToImage = function() {
        return this.stage.toDataURL({
          miteType: "image/png",
          callback: function(data) {
            var image, imageWindow;
            image = data;
            imageWindow = window.open(image);
            return $(imageWindow.document.body).prepend("<p>Нажмите сохранить (ctrl/cmd + s)</p>");
          }
        });
      };

      CardEditorLayout.prototype.addLayer = function(layerModel, layerCollection, options) {
        var layer, params;
        console.log('add layer to stage');
        params = layerModel.toJSON();
        layer = new Kinetic.Layer(params);
        return this.stage.add(layer);
      };

      CardEditorLayout.prototype.removeLayer = function(layerModel, layerCollection, options) {
        var layers;
        console.log('add layer to stage');
        layers = this.stage.getLayers();
        if (layers.length > 1) {
          return layers[layers.length - 1].destroy();
        }
      };

      CardEditorLayout.prototype.onAddShape = function() {
        var layer, shape;
        console.log('addShape');
        layer = this.stage.children[this.stage.children.length - 1];
        shape = new Kinetic.RegularPolygon({
          x: app.getRandom(0, this.stage.getWidth()),
          y: app.getRandom(0, this.stage.getHeight()),
          sides: app.getRandom(3, 9),
          radius: app.getRandom(10, 140),
          fillRed: app.getRandom(1, 255),
          fillGreen: app.getRandom(1, 255),
          fillBlue: app.getRandom(1, 255),
          opacity: app.getRandom(0.1, 1, 2),
          draggable: true
        });
        layer.add(shape);
        return layer.draw();
      };

      CardEditorLayout.prototype.onRemoveShape = function() {
        var layer, shapes;
        console.log('removeShape');
        layer = this.stage.children[this.stage.children.length - 1];
        shapes = layer.children;
        if (shapes && shapes.length > 0) {
          shapes[shapes.length - 1].destroy();
          return layer.draw();
        }
      };

      CardEditorLayout.prototype.drawRandomBackgroundButton = function() {
        this.stage.background = new app.CardGenerator.cards.CardModel();
        return this.draw();
      };

      CardEditorLayout.prototype.draw = function() {
        var layer;
        this.trigger('draw');
        this.stage.draw();
        layer = this.stage.children[0];
        this.stage.background = this.stage.background || new app.CardGenerator.cards.CardModel();
        return app.CardGenerator.generators.gradientGen.draw(layer.canvas._canvas, this.stage.background);
      };

      return CardEditorLayout;

    })(Marionette.LayoutView);
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmRfZWRpdG9yL0xheW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBOztzRkFBQTs7QUFBQSxFQUFBLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTCxDQUFZLFlBQVosRUFBMEIsU0FBQyxVQUFELEdBQUE7QUFHekIsUUFBQSwwRkFBQTtBQUFBLElBQU07QUFBTiwyQ0FBQSxDQUFBOzs7O09BQUE7O2dDQUFBOztPQUFpQyxRQUFRLENBQUMsTUFBMUMsQ0FBQTtBQUFBLElBRU07QUFDTCx3Q0FBQSxDQUFBOzs7O09BQUE7O0FBQUEsZ0NBQUEsS0FBQSxHQUFPLGtCQUFQLENBQUE7OzZCQUFBOztPQUQ2QixRQUFRLENBQUMsV0FGdkMsQ0FBQTtBQUFBLElBS007QUFDTCxtQ0FBQSxDQUFBOzs7O09BQUE7O0FBQUEsMkJBQUEsUUFBQSxHQUNDO0FBQUEsUUFBQSxTQUFBLEVBQVcsU0FBWDtBQUFBLFFBQ0EsZUFBQSxFQUFxQixJQUFBLGVBQUEsQ0FBQSxDQURyQjtPQURELENBQUE7O3dCQUFBOztPQUR3QixRQUFRLENBQUMsTUFMbEMsQ0FBQTtBQUFBLElBVU07QUFDTCx3Q0FBQSxDQUFBOzs7O09BQUE7O0FBQUEsZ0NBQUEsS0FBQSxHQUFPLFVBQVAsQ0FBQTs7NkJBQUE7O09BRDZCLFFBQVEsQ0FBQyxXQVZ2QyxDQUFBO0FBQUEsSUFhTTtBQUNMLG9DQUFBLENBQUE7Ozs7T0FBQTs7QUFBQSw0QkFBQSxRQUFBLEdBQ0M7QUFBQSxRQUFBLGVBQUEsRUFBcUIsSUFBQSxlQUFBLENBQUEsQ0FBckI7T0FERCxDQUFBOzt5QkFBQTs7T0FEeUIsUUFBUSxDQUFDLE1BYm5DLENBQUE7QUFBQSxJQWlCTTtBQUNMLG9DQUFBLENBQUE7Ozs7T0FBQTs7QUFBQSw0QkFBQSxRQUFBLEdBQ0M7QUFBQSxRQUFBLFlBQUEsRUFBYyxFQUFkO09BREQsQ0FBQTs7eUJBQUE7O09BRHlCLFFBQVEsQ0FBQyxNQWpCbkMsQ0FBQTtXQXNCTSxV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Q0FBeEIsQ0FBQTtlQUVBLElBQUMsQ0FBQSxJQUFELENBQUEsRUFMMkI7TUFBQSxDQWxKNUIsQ0FBQTs7QUFBQSxpQ0F5SkEsSUFBQSxHQUFNLFNBQUEsR0FBQTtBQUNMLFlBQUEsS0FBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULENBQUEsQ0FBQTtBQUFBLFFBMEhBLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBUCxDQUFBLENBMUhBLENBQUE7QUFBQSxRQTJIQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFTLENBQUEsQ0FBQSxDQTNIeEIsQ0FBQTtBQUFBLFFBNEhBLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBUCxHQUFvQixJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVAsSUFBeUIsSUFBQSxHQUFHLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxTQUF4QixDQUFBLENBNUg3QyxDQUFBO2VBNkhBLEdBQUcsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUF6QyxDQUE4QyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQTNELEVBQW9FLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBM0UsRUE5SEs7TUFBQSxDQXpKTixDQUFBOzs4QkFBQTs7T0FEeUMsVUFBVSxDQUFDLFlBekI1QjtFQUFBLENBQTFCLENBQUEsQ0FBQTtBQUFBIiwiZmlsZSI6ImNhcmRfZWRpdG9yL0xheW91dC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkBhcHAubW9kdWxlICdDYXJkRWRpdG9yJywgKENhcmRFZGl0b3IpIC0+XG5cblx0I0RlZmluZSBlZGl0b3JzIGRhdGEgc3RydWNydXJlXG5cdGNsYXNzIEFic3RyYWN0U2hhcGVNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsXG5cblx0Y2xhc3MgU2hhcGVDb2xsZWN0aW9uIGV4dGVuZHMgQmFja2JvbmUuQ29sbGVjdGlvblxuXHRcdG1vZGVsOiBBYnN0cmFjdFNoYXBlTW9kZWxcblxuXHRjbGFzcyBMYXllck1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWxcblx0XHRkZWZhdWx0czpcblx0XHRcdGxheWVyTmFtZTogJ0RlZmF1bHQnXG5cdFx0XHRzaGFwZUNvbGxlY3Rpb246IG5ldyBTaGFwZUNvbGxlY3Rpb24oKVxuXG5cdGNsYXNzIExheWVyQ29sbGVjdGlvbiBleHRlbmRzIEJhY2tib25lLkNvbGxlY3Rpb25cblx0XHRtb2RlbDogTGF5ZXJNb2RlbFxuXG5cdGNsYXNzIEVkaXRvck1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWxcblx0XHRkZWZhdWx0czpcblx0XHRcdGxheWVyQ29sbGVjdGlvbjogbmV3IExheWVyQ29sbGVjdGlvbigpXG5cblx0Y2xhc3MgRWRpdG9yU3RhdGUgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbFxuXHRcdGRlZmF1bHRzOlxuXHRcdFx0Y3VycmVudExheWVyOiB7fVx0XHRcblxuXHQjIERlZmluZSBlZGl0b3JzIGxheW91dFx0XHRcblx0Y2xhc3MgQ2FyZEVkaXRvci5DYXJkRWRpdG9yTGF5b3V0IGV4dGVuZHMgTWFyaW9uZXR0ZS5MYXlvdXRWaWV3XG5cdFx0bG9nZ2luZzogb25cblx0XHRjb3VudGVyOiAwXG5cblx0XHRjbGFzc05hbWU6ICdjYXJkLWVkaXRvci1sYXlvdXQnXG5cblx0XHR1aTpcblx0XHRcdCdjYW52YXNDb250YWluZXInOiAnI2NhbnZhcy1jb250YWluZXInXG5cdFx0XHQnZHJhd1JhbmRvbUJhY2tncm91bmRCdXR0b24nOiAnLmRyYXctcmFuZG9tLWJhY2tncm91bmQnXG5cdFx0XHQnc2F2ZUltYWdlRmlsZUJ1dHRvbic6ICcuc2F2ZS10by1pbWFnZSdcblx0XHRcdFx0XHRcblx0XHRldmVudHM6XG5cdFx0XHQnY2xpY2sgQHVpLmRyYXdSYW5kb21CYWNrZ3JvdW5kQnV0dG9uJzogJ2RyYXdSYW5kb21CYWNrZ3JvdW5kQnV0dG9uJ1xuXHRcdFx0J2NsaWNrIEB1aS5zYXZlSW1hZ2VGaWxlQnV0dG9uJzogJ3NhdmVHZW5lcmF0ZWRDYXJkVG9JbWFnZSdcblxuXHRcdHJlZ2lvbnM6XG5cdFx0XHRwYW5lbDE6ICcjcGFuZWwtMSdcblx0XHRcdHBhbmVsMjogJyNwYW5lbC0yJ1xuXHRcdFx0cGFuZWwzOiAnI3BhbmVsLTMnXG5cblxuXG5cdFx0aW5pdGlhbGl6ZTogLT5cblx0XHRcdEBiaW5kICdhbGwnLCAtPlxuXHRcdFx0XHRjb25zb2xlLmxvZyBcIkNBUkQgRURJVE9SIExBWU9VVDpcXHRcIiwgYXJndW1lbnRzIGlmIEBsb2dnaW5nIGlzIG9uXG5cblx0XHRcdEBlZGl0b3JTdGF0ZSA9IG5ldyBFZGl0b3JTdGF0ZSgpXG5cdFx0XHRAbW9kZWwgPSBuZXcgRWRpdG9yTW9kZWwoKVxuXHRcdHRlbXBsYXRlOiAobW9kZWwpIC0+XG5cdFx0XHR0ZW1wbGF0aXplci5jYXJkRWRpdG9yLmVkaXRvciBAbW9kZWxcblxuXHRcdG9uU2hvdzogPT5cblx0XHRcdEBsaXN0ZW5UbyBhcHAsICdyZXNpemUnLCBAcmVzaXplXG5cblx0XHRcdCNEZWZpbmUgS2luZXRpYyBzdGFnZVxuXHRcdFx0c3RhZ2VXaWR0aCA9IEB1aS5jYW52YXNDb250YWluZXIud2lkdGgoKVxuXHRcdFx0c3RhZ2VIZWlnaHQgPSBAdWkuY2FudmFzQ29udGFpbmVyLmhlaWdodCgpXG5cdFx0XHRAc3RhZ2UgPSBuZXcgS2luZXRpYy5TdGFnZVxuXHRcdFx0XHRjb250YWluZXI6IFwiY2FudmFzLWNvbnRhaW5lclwiXG5cdFx0XHRcdHdpZHRoOiBzdGFnZVdpZHRoXG5cdFx0XHRcdGhlaWdodDogc3RhZ2VXaWR0aCAqIDAuNTYyNVxuXHRcdFx0c3RhZ2VQYXJhbXMgPVxuXHRcdFx0XHRzY2FsZTogQHN0YWdlLnNjYWxlKClcblx0XHRcdFx0d2lkdGg6IEB1aS5jYW52YXNDb250YWluZXIuaW5uZXJXaWR0aCgpXG5cdFx0XHRcdGhlaWdodDogQHVpLmNhbnZhc0NvbnRhaW5lci5pbm5lckhlaWdodCgpXG5cdFx0XHRAZWRpdG9yU3RhdGUuc2V0ICdzdGFnZVBhcmFtcycsIHN0YWdlUGFyYW1zXG5cdFx0XHRcblxuXHRcdFx0IyBEZWZpbmUgR1VJIHBhbmVscywgbXVzdCBiZSBpbiB0aGUgZW5kIG9mIHNob3dpbmcgbG9naWMsIGJlY2F1c2Ugb2YgY2FudmFzIHJlbmRlcmluZ1xuXHRcdFx0QHBhbmVsMS5zaG93IG5ldyBDYXJkRWRpdG9yLnZpZXdzLkxheWVyc1BhbmVsIFxuXHRcdFx0XHRzdGF0ZTogQGVkaXRvclN0YXRlXG5cdFx0XHRcdG1vZGVsOiBAbW9kZWxcblx0XHRcdEBwYW5lbDIuc2hvdyBuZXcgQ2FyZEVkaXRvci52aWV3cy5MYXllckNoaWxkc1BhbmVsIFxuXHRcdFx0XHRzdGF0ZTogQGVkaXRvclN0YXRlXG5cdFx0XHRcdG1vZGVsOiBAbW9kZWxcblxuXHRcdFx0QGxpc3RlblRvIEBtb2RlbCwgJ2NoYW5nZScsIEBkcmF3XG5cdFx0XHRAbGlzdGVuVG8gQG1vZGVsLmdldCgnbGF5ZXJDb2xsZWN0aW9uJyksICdhZGQnLCBAYWRkTGF5ZXJcblx0XHRcdEBsaXN0ZW5UbyBAbW9kZWwuZ2V0KCdsYXllckNvbGxlY3Rpb24nKSwgJ3JlbW92ZScsIEByZW1vdmVMYXllclxuXHRcdFx0QGxpc3RlblRvIEBtb2RlbC5nZXQoJ2xheWVyQ29sbGVjdGlvbicpLCAncmVzZXQgc2V0IHN5bmMgZmV0Y2gnLCBAZHJhd1xuXG5cblx0XHRcdCMgQWRkIGZpcnN0IGxheWVyXG5cdFx0XHRAbW9kZWwuZ2V0KCdsYXllckNvbGxlY3Rpb24nKS5hZGQgbGF5ZXJOYW1lOiBcItCk0L7QvVwiIGlmIEBtb2RlbC5nZXQoJ2xheWVyQ29sbGVjdGlvbicpLmxlbmd0aCBpcyAwXG5cdFx0XHRAbW9kZWwuZ2V0KCdsYXllckNvbGxlY3Rpb24nKS5hZGQgbGF5ZXJOYW1lOiBcItCh0LvQvtC5ICN7IEBtb2RlbC5nZXQoJ2xheWVyQ29sbGVjdGlvbicpLmxlbmd0aCB9XCIgaWYgQG1vZGVsLmdldCgnbGF5ZXJDb2xsZWN0aW9uJykubGVuZ3RoIGlzIDFcblx0XHRcdEBlZGl0b3JTdGF0ZS5zZXQgJ2N1cnJlbnRMYXllcicsIEBtb2RlbC5nZXQoJ2xheWVyQ29sbGVjdGlvbicpLm1vZGVsc1swXVxuXHRcdFx0Y29uc29sZS5sb2cgJ2N1cnJlbnQgbGF5ZXInLEBlZGl0b3JTdGF0ZS5nZXQgJ2N1cnJlbnRMYXllcidcblx0XHRcdFxuXHRcdFx0bGF5ZXIgPSBAc3RhZ2UuY2hpbGRyZW5bMF1cblx0XHRcdGFwcC5DYXJkR2VuZXJhdG9yLmdlbmVyYXRvcnMuZ3JhZGllbnRHZW4uZHJhdyhsYXllci5jYW52YXMuX2NhbnZhcywgKG5ldyBhcHAuQ2FyZEdlbmVyYXRvci5jYXJkcy5DYXJkTW9kZWwoKSkpXG5cblx0XHRcdEBsaXN0ZW5UbyBAZWRpdG9yU3RhdGUuZ2V0KCdjdXJyZW50TGF5ZXInKS5nZXQoJ3NoYXBlQ29sbGVjdGlvbicpLCAnYWRkJywgQG9uQWRkU2hhcGVcblx0XHRcdEBsaXN0ZW5UbyBAZWRpdG9yU3RhdGUuZ2V0KCdjdXJyZW50TGF5ZXInKS5nZXQoJ3NoYXBlQ29sbGVjdGlvbicpLCAncmVtb3ZlJywgQG9uUmVtb3ZlU2hhcGVcblx0XHRcdEBsaXN0ZW5UbyBAZWRpdG9yU3RhdGUuZ2V0KCdjdXJyZW50TGF5ZXInKS5nZXQoJ3NoYXBlQ29sbGVjdGlvbicpLCAncmVzZXQgc2V0IHN5bmMgZmV0Y2gnLCBAZHJhd1xuXG5cdFx0XHRAZHJhdygpXG5cblx0XHRyZXNpemU6ID0+XG5cdFx0XHRAdHJpZ2dlciAncmVzaXplJ1xuXHRcdFx0c3RhZ2VQYXJhbXMgPSBAZWRpdG9yU3RhdGUuZ2V0ICdzdGFnZVBhcmFtcydcblx0XHRcdG5ld1N0YWdlUGFyYW1zID0ge31cblxuXHRcdFx0bmV3U3RhZ2VQYXJhbXMud2lkdGggPSBAdWkuY2FudmFzQ29udGFpbmVyLmlubmVyV2lkdGgoKSAjIG5ldyB3aWR0aCBvZiBwYWdlXG5cdFx0XHRuZXdTdGFnZVBhcmFtcy5oZWlnaHQgPSBuZXdTdGFnZVBhcmFtcy53aWR0aCAqIDAuNTYyNSAjIG5ldyBoZWlnaHQgb2YgcGFnZVxuXG5cdFx0XHR4U2NhbGUgPSAobmV3U3RhZ2VQYXJhbXMud2lkdGggLyBzdGFnZVBhcmFtcy53aWR0aCkgKiBzdGFnZVBhcmFtcy5zY2FsZS54ICMgcGVyY2VudCBjaGFuZ2UgaW4gd2lkdGggKEV4OiAxMDAwIC0gNDAwLzEwMDAgbWVhbnMgdGhlIHBhZ2Ugc2NhbGVkIGRvd24gNjAlLCB5b3Ugc2hvdWxkIHBsYXkgd2l0aCB0aGlzIHRvIGdldCB3YW50ZWQgcmVzdWx0cylcblx0XHRcdHlTY2FsZSA9IChuZXdTdGFnZVBhcmFtcy5oZWlnaHQgLyBzdGFnZVBhcmFtcy5oZWlnaHQpICogc3RhZ2VQYXJhbXMuc2NhbGUueVxuXG5cdFx0XHRuZXdTdGFnZVBhcmFtcy5zY2FsZSA9XG5cdFx0XHRcdHg6IHhTY2FsZVxuXHRcdFx0XHR5OiB5U2NhbGVcblx0XHRcdEBzdGFnZS5zZXRXaWR0aCBuZXdTdGFnZVBhcmFtcy53aWR0aFxuXHRcdFx0QHN0YWdlLnNldEhlaWdodCBuZXdTdGFnZVBhcmFtcy5oZWlnaHRcblx0XHRcdEBzdGFnZS5zZXRTY2FsZSBuZXdTdGFnZVBhcmFtcy5zY2FsZVxuXG5cdFx0XHRAZWRpdG9yU3RhdGUuc2V0ICdzdGFnZVBhcmFtcycsIG5ld1N0YWdlUGFyYW1zXG5cblx0XHRcdEBkcmF3KClcblxuXHRcdHNhdmVHZW5lcmF0ZWRDYXJkVG9JbWFnZTogPT5cblx0XHRcdEBzdGFnZS50b0RhdGFVUkxcblx0XHRcdFx0bWl0ZVR5cGU6IFwiaW1hZ2UvcG5nXCJcblx0XHRcdFx0Y2FsbGJhY2s6IChkYXRhKSAtPlxuXHRcdFx0XHRcdCMgaW1hZ2UgPSBkYXRhLnJlcGxhY2UoXCJpbWFnZS9wbmdcIiwgXCJpbWFnZS9vY3RldC1zdHJlYW1cIilcblx0XHRcdFx0XHRpbWFnZSA9IGRhdGFcblx0XHRcdFx0XHRpbWFnZVdpbmRvdyA9IHdpbmRvdy5vcGVuKGltYWdlKVxuXHRcdFx0XHRcdCQoaW1hZ2VXaW5kb3cuZG9jdW1lbnQuYm9keSkucHJlcGVuZChcIjxwPtCd0LDQttC80LjRgtC1INGB0L7RhdGA0LDQvdC40YLRjCAoY3RybC9jbWQgKyBzKTwvcD5cIilcblxuXHRcdGFkZExheWVyOiAobGF5ZXJNb2RlbCwgbGF5ZXJDb2xsZWN0aW9uLCBvcHRpb25zKSA9PlxuXHRcdFx0Y29uc29sZS5sb2cgJ2FkZCBsYXllciB0byBzdGFnZSdcblx0XHRcdHBhcmFtcyA9IGxheWVyTW9kZWwudG9KU09OKClcblx0XHRcdGxheWVyID0gbmV3IEtpbmV0aWMuTGF5ZXIgcGFyYW1zXG5cdFx0XHRAc3RhZ2UuYWRkIGxheWVyXG5cblx0XHRyZW1vdmVMYXllcjogKGxheWVyTW9kZWwsIGxheWVyQ29sbGVjdGlvbiwgb3B0aW9ucykgPT5cblx0XHRcdGNvbnNvbGUubG9nICdhZGQgbGF5ZXIgdG8gc3RhZ2UnXG5cdFx0XHRsYXllcnMgPSBAc3RhZ2UuZ2V0TGF5ZXJzKClcblx0XHRcdGlmIGxheWVycy5sZW5ndGggPiAxXG5cdFx0XHRcdGxheWVyc1tsYXllcnMubGVuZ3RoLTFdLmRlc3Ryb3koKVxuXG5cdFx0b25BZGRTaGFwZTogPT5cblx0XHRcdGNvbnNvbGUubG9nICdhZGRTaGFwZSdcblxuXHRcdFx0bGF5ZXIgPSBAc3RhZ2UuY2hpbGRyZW5bQHN0YWdlLmNoaWxkcmVuLmxlbmd0aC0xXVxuXG5cdFx0XHRzaGFwZSA9IG5ldyBLaW5ldGljLlJlZ3VsYXJQb2x5Z29uXG5cdFx0XHRcdHg6IGFwcC5nZXRSYW5kb20gMCwgQHN0YWdlLmdldFdpZHRoKClcblx0XHRcdFx0eTogYXBwLmdldFJhbmRvbSAwLCBAc3RhZ2UuZ2V0SGVpZ2h0KClcblx0XHRcdFx0c2lkZXM6IGFwcC5nZXRSYW5kb20gMywgOVxuXHRcdFx0XHRyYWRpdXM6IGFwcC5nZXRSYW5kb20gMTAsIDE0MFxuXHRcdFx0XHRmaWxsUmVkOiBhcHAuZ2V0UmFuZG9tIDEsIDI1NVxuXHRcdFx0XHRmaWxsR3JlZW46IGFwcC5nZXRSYW5kb20gMSwgMjU1XG5cdFx0XHRcdGZpbGxCbHVlOiBhcHAuZ2V0UmFuZG9tIDEsIDI1NVxuXHRcdFx0XHRvcGFjaXR5OiBhcHAuZ2V0UmFuZG9tIDAuMSwgMSwgMlxuXHRcdFx0XHRkcmFnZ2FibGU6IHRydWVcblx0XHRcdGxheWVyLmFkZCBzaGFwZVxuXHRcdFx0bGF5ZXIuZHJhdygpXG5cblx0XHRcdFxuXHRcdG9uUmVtb3ZlU2hhcGU6ID0+XG5cdFx0XHRjb25zb2xlLmxvZyAncmVtb3ZlU2hhcGUnXG5cdFx0XHRsYXllciA9IEBzdGFnZS5jaGlsZHJlbltAc3RhZ2UuY2hpbGRyZW4ubGVuZ3RoLTFdXG5cdFx0XHRzaGFwZXMgPSBsYXllci5jaGlsZHJlblxuXHRcdFx0aWYgc2hhcGVzIGFuZCBzaGFwZXMubGVuZ3RoID4gMFxuXHRcdFx0XHRzaGFwZXNbc2hhcGVzLmxlbmd0aC0xXS5kZXN0cm95KClcblx0XHRcdFx0bGF5ZXIuZHJhdygpXHRcblxuXHRcdGRyYXdSYW5kb21CYWNrZ3JvdW5kQnV0dG9uOiA9PlxuXHRcdFx0IyBsYXllciA9IEBzdGFnZS5jaGlsZHJlblswXS5jYW52YXMuX2NhbnZhc1xuXHRcdFx0IyBsYXllci5nZXRDb250ZXh0KCcyZCcpLmNsZWFyUmVjdCgwLDAsbGF5ZXIud2lkdGgsbGF5ZXIuaGVpZ2h0KVxuXHRcdFx0QHN0YWdlLmJhY2tncm91bmQgPSBuZXcgYXBwLkNhcmRHZW5lcmF0b3IuY2FyZHMuQ2FyZE1vZGVsKClcblx0XHRcdCMgYXBwLkNhcmRHZW5lcmF0b3IuZ2VuZXJhdG9ycy5ncmFkaWVudEdlbi5kcmF3KGxheWVyLCBAc3RhZ2UuYmFja2dyb3VuZCApXG5cdFx0XHRAZHJhdygpXG5cblx0XHRkcmF3OiA9PlxuXHRcdFx0QHRyaWdnZXIgJ2RyYXcnXG5cdFx0XHQjIGNvbnNvbGUubG9nICdlZGl0b3IgbW9kZWwgY2hhbmdlZCwgZHJhdyAnLCBhcmd1bWVudHNcblx0XHRcdCMgbGF5ZXIgPSBuZXcgS2luZXRpYy5GYXN0TGF5ZXIoKVxuXHRcdFx0IyBsYXllci5hZGQgbmV3IEtpbmV0aWMuUmVjdFxuXHRcdFx0IyBcdHg6MCwgeTowLCB3aWR0aDogQHN0YWdlLndpZHRoKCksIGhlaWdodDogQHN0YWdlLmhlaWdodCgpXG5cblx0XHRcdCMgXHQjIGNvcm5lclJhZGl1c1xuXHRcdFx0IyBcdCMgZmlsbFxuXHRcdFx0IyBcdGZpbGxSZWQ6IGFwcC5nZXRSYW5kb20gMCwgMjU1XG5cdFx0XHQjIFx0ZmlsbEdyZWU6bjogYXBwLmdldFJhbmRvbSAwLCAyNTVcblx0XHRcdCMgXHRmaWxsQmx1ZTogYXBwLmdldFJhbmRvbSAwLCAyNTVcblx0XHRcdCMgXHRmaWxsQWxwaGE6IGFwcC5nZXRSYW5kb20gMCwgMjU1XG5cdFx0XHQjIFx0IyBmaWxsUGF0dGVybkltYWdlXG5cdFx0XHQjIFx0IyBmaWxsXG5cdFx0XHQjIFx0IyBmaWxsUGF0dGVyblhcblx0XHRcdCMgXHQjIGZpbGxQYXR0ZXJuWVxuXHRcdFx0IyBcdCMgZmlsbFBhdHRlcm5PZmZzZXRcblx0XHRcdCMgXHQjIG9iamVjdFxuXHRcdFx0IyBcdCMgZmlsbFBhdHRlcm5PZmZzZXRYXG5cdFx0XHQjIFx0IyBmaWxsUGF0dGVybk9mZnNldFlcblx0XHRcdCMgXHQjIGZpbGxQYXR0ZXJuU2NhbGVcblx0XHRcdCMgXHQjIG9iamVjdFxuXHRcdFx0IyBcdCMgZmlsbFBhdHRlcm5TY2FsZVhcblx0XHRcdCMgXHQjIGZpbGxQYXR0ZXJuU2NhbGVZXG5cdFx0XHQjIFx0IyBmaWxsUGF0dGVyblJvdGF0aW9uXG5cdFx0XHQjIFx0IyBmaWxsUGF0dGVyblJlcGVhdFxuXHRcdFx0IyBcdCMgY2FuXG5cdFx0XHQjIFx0IyBmaWxsTGluZWFyR3JhZGllbnRTdGFydFBvaW50XG5cdFx0XHQjIFx0IyBvYmplY3Rcblx0XHRcdCMgXHQjIGZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnRYXG5cdFx0XHQjIFx0IyBmaWxsTGluZWFyR3JhZGllbnRTdGFydFBvaW50WVxuXHRcdFx0IyBcdCMgZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRcblx0XHRcdCMgXHQjIGZpbGxMaW5lYXJHcmFkaWVudEVuZFBvaW50WFxuXHRcdFx0IyBcdCMgZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRZXG5cdFx0XHQjIFx0IyBmaWxsTGluZWFyR3JhZGllbnRDb2xvclN0b3BzXG5cdFx0XHQjIFx0IyBhcnJheVxuXHRcdFx0IyBcdCMgZmlsbFJhZGlhbEdyYWRpZW50U3RhcnRQb2ludFxuXHRcdFx0IyBcdCMgb2JqZWN0XG5cdFx0XHQjIFx0IyBmaWxsUmFkaWFsR3JhZGllbnRTdGFydFBvaW50WFxuXHRcdFx0IyBcdCMgZmlsbFJhZGlhbEdyYWRpZW50U3RhcnRQb2ludFlcblx0XHRcdCMgXHQjIGZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50XG5cdFx0XHQjIFx0IyBvYmplY3Rcblx0XHRcdCMgXHQjIGZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50WFxuXHRcdFx0IyBcdCMgZmlsbFJhZGlhbEdyYWRpZW50RW5kUG9pbnRZXG5cdFx0XHQjIFx0IyBmaWxsUmFkaWFsR3JhZGllbnRTdGFydFJhZGl1c1xuXHRcdFx0IyBcdCMgZmlsbFJhZGlhbEdyYWRpZW50RW5kUmFkaXVzXG5cdFx0XHQjIFx0IyBmaWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzXG5cdFx0XHQjIFx0IyBhcnJheVxuXHRcdFx0IyBcdCMgZmlsbEVuYWJsZWRcblx0XHRcdCMgXHQjIGZsYWdcblx0XHRcdCMgXHQjIGZpbGxQcmlvcml0eVxuXHRcdFx0IyBcdCMgY2FuXG5cdFx0XHQjIFx0IyBzdHJva2Vcblx0XHRcdCMgXHQjIHN0cm9rZVxuXHRcdFx0IyBcdCMgc3Ryb2tlUmVkXG5cdFx0XHQjIFx0IyBzZXRcblx0XHRcdCMgXHQjIHN0cm9rZUdyZWVuXG5cdFx0XHQjIFx0IyBzZXRcblx0XHRcdCMgXHQjIHN0cm9rZUJsdWVcblx0XHRcdCMgXHQjIHNldFxuXHRcdFx0IyBcdCMgc3Ryb2tlQWxwaGFcblx0XHRcdCMgXHQjIHNldFxuXHRcdFx0IyBcdCMgc3Ryb2tlV2lkdGhcblx0XHRcdCMgXHQjIHN0cm9rZVxuXHRcdFx0IyBcdCMgc3Ryb2tlU2NhbGVFbmFibGVkXG5cdFx0XHQjIFx0IyBmbGFnXG5cdFx0XHQjIFx0IyBzdHJva2VFbmFibGVkXG5cdFx0XHQjIFx0IyBmbGFnXG5cdFx0XHQjIFx0IyBsaW5lSm9pblxuXHRcdFx0IyBcdCMgY2FuXG5cdFx0XHQjIFx0IyBsaW5lQ2FwXG5cdFx0XHQjIFx0IyBjYW5cblx0XHRcdCMgXHQjIHNoYWRvd0NvbG9yXG5cdFx0XHQjIFx0IyBzaGFkb3dSZWRcblx0XHRcdCMgXHQjIHNldFxuXHRcdFx0IyBcdCMgc2hhZG93R3JlZW5cblx0XHRcdCMgXHQjIHNldFxuXHRcdFx0IyBcdCMgc2hhZG93Qmx1ZVxuXHRcdFx0IyBcdCMgc2V0XG5cdFx0XHQjIFx0IyBzaGFkb3dBbHBoYVxuXHRcdFx0IyBcdCMgc2V0XG5cdFx0XHQjIFx0IyBzaGFkb3dCbHVyXG5cdFx0XHQjIFx0IyBzaGFkb3dPZmZzZXRcblx0XHRcdCMgXHQjIG9iamVjdFxuXHRcdFx0IyBcdCMgc2hhZG93T2Zmc2V0WFxuXHRcdFx0IyBcdCMgc2hhZG93T2Zmc2V0WVxuXHRcdFx0IyBcdCMgc2hhZG93T3BhY2l0eVxuXHRcdFx0IyBcdCMgc2hhZG93XG5cdFx0XHQjIFx0IyBzaGFkb3dFbmFibGVkXG5cdFx0XHQjIFx0IyBmbGFnXG5cdFx0XHQjIFx0IyBkYXNoXG5cdFx0XHQjIFx0IyBkYXNoRW5hYmxlZFxuXHRcdFx0IyBcdCMgZmxhZ1xuXHRcdFx0IyBcdCMgdmlzaWJsZVxuXHRcdFx0IyBcdCMgbGlzdGVuaW5nXG5cdFx0XHQjIFx0IyB3aGV0aGVyXG5cdFx0XHQjIFx0IyBpZFxuXHRcdFx0IyBcdCMgdW5pcXVlXG5cdFx0XHQjIFx0IyBuYW1lXG5cdFx0XHQjIFx0IyBub25cblx0XHRcdCMgXHQjIG9wYWNpdHlcblx0XHRcdCMgXHQjIGRldGVybWluZXNcblx0XHRcdCMgXHQjIHNjYWxlXG5cdFx0XHQjIFx0IyBzZXRcblx0XHRcdCMgXHQjIHNjYWxlWFxuXHRcdFx0IyBcdCMgc2V0XG5cdFx0XHQjIFx0IyBzY2FsZVlcblx0XHRcdCMgXHQjIHNldFxuXHRcdFx0IyBcdCMgcm90YXRpb25cblx0XHRcdCMgXHQjIHJvdGF0aW9uXG5cdFx0XHQjIFx0IyBvZmZzZXRcblx0XHRcdCMgXHQjIG9mZnNldFxuXHRcdFx0IyBcdCMgb2Zmc2V0WFxuXHRcdFx0IyBcdCMgc2V0XG5cdFx0XHQjIFx0IyBvZmZzZXRZXG5cdFx0XHQjIFx0IyBzZXRcblx0XHRcdCMgXHQjIGRyYWdnYWJsZVxuXHRcdFx0IyBcdCMgbWFrZXNcblx0XHRcdCMgXHQjIGRyYWdEaXN0YW5jZVxuXHRcdFx0IyBcdCMgZHJhZ0JvdW5kRnVuY1xuXG5cdFx0XHQjIEBzdGFnZS5hZGQgbGF5ZXJcblx0XHRcdEBzdGFnZS5kcmF3KClcblx0XHRcdGxheWVyID0gQHN0YWdlLmNoaWxkcmVuWzBdXG5cdFx0XHRAc3RhZ2UuYmFja2dyb3VuZCA9IEBzdGFnZS5iYWNrZ3JvdW5kIG9yIG5ldyBhcHAuQ2FyZEdlbmVyYXRvci5jYXJkcy5DYXJkTW9kZWwoKVxuXHRcdFx0YXBwLkNhcmRHZW5lcmF0b3IuZ2VuZXJhdG9ycy5ncmFkaWVudEdlbi5kcmF3KGxheWVyLmNhbnZhcy5fY2FudmFzLCBAc3RhZ2UuYmFja2dyb3VuZCApXG5cbiJdfQ==