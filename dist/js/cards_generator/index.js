(function() {
  app.module('CardGenerator', function(CardGenerator) {
    return this.addInitializer(function() {
      console.debug('Initializing: CardGenerator module...');
      this.controller = new CardGenerator.Controller;
      this.router = new CardGenerator.Router({
        controller: this.controller
      });
      this.data = new Backbone.DeepModel(dataFromServer);
      this.cardsView = new CardGenerator.CardsView;
      $("a[href^='/']", "body").click((function(_this) {
        return function(e) {
          var href;
          href = $(e.target).attr('href');
          if (href.indexOf('/api') !== 0) {
            e.preventDefault();
            return _this.router.navigate(href, {
              trigger: true
            });
          }
        };
      })(this));
      $.ajax({
        url: '/api/fonts-list',
        async: false,
        success: (function(_this) {
          return function(fontList) {
            return _this.data.set('fontsList', fontList);
          };
        })(this),
        error: (function(_this) {
          return function(xhr) {
            return console.error('Error: ', xhr.responseText);
          };
        })(this)
      });
      if (!Backbone.history.started) {
        return Backbone.history.start({
          pushState: true
        });
      }
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmRzX2dlbmVyYXRvci9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVcsZUFBWCxFQUE0QixTQUFDLGFBQUQsR0FBQTtXQUMzQixJQUFDLENBQUEsY0FBRCxDQUFnQixTQUFBLEdBQUE7QUFDZixNQUFBLE9BQU8sQ0FBQyxLQUFSLENBQWMsdUNBQWQsQ0FBQSxDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsVUFBRCxHQUFlLEdBQUEsQ0FBQSxhQUFpQixDQUFDLFVBTGpDLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxhQUFhLENBQUMsTUFBZCxDQUFxQjtBQUFBLFFBQUEsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUFiO09BQXJCLENBTmQsQ0FBQTtBQUFBLE1BUUEsSUFBQyxDQUFBLElBQUQsR0FBWSxJQUFBLFFBQVEsQ0FBQyxTQUFULENBQW1CLGNBQW5CLENBUlosQ0FBQTtBQUFBLE1BVUEsSUFBQyxDQUFBLFNBQUQsR0FBYSxHQUFBLENBQUEsYUFBaUIsQ0FBQyxTQVYvQixDQUFBO0FBQUEsTUFZQSxDQUFBLENBQUUsY0FBRixFQUFpQixNQUFqQixDQUF3QixDQUFDLEtBQXpCLENBQWdDLENBQUEsU0FBQSxLQUFBLEdBQUE7ZUFBQSxTQUFDLENBQUQsR0FBQTtBQUMvQixjQUFBLElBQUE7QUFBQSxVQUFBLElBQUEsR0FBTyxDQUFBLENBQUUsQ0FBQyxDQUFDLE1BQUosQ0FBVyxDQUFDLElBQVosQ0FBaUIsTUFBakIsQ0FBUCxDQUFBO0FBQ0EsVUFBQSxJQUFHLElBQUksQ0FBQyxPQUFMLENBQWEsTUFBYixDQUFBLEtBQTBCLENBQTdCO0FBQ0MsWUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTttQkFDQSxLQUFDLENBQUEsTUFBTSxDQUFDLFFBQVIsQ0FBaUIsSUFBakIsRUFDQztBQUFBLGNBQUEsT0FBQSxFQUFTLElBQVQ7YUFERCxFQUZEO1dBRitCO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBaEMsQ0FaQSxDQUFBO0FBQUEsTUFtQkEsQ0FBQyxDQUFDLElBQUYsQ0FDQztBQUFBLFFBQUEsR0FBQSxFQUFLLGlCQUFMO0FBQUEsUUFDQSxLQUFBLEVBQU8sS0FEUDtBQUFBLFFBRUEsT0FBQSxFQUFTLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQyxRQUFELEdBQUE7bUJBQ1IsS0FBQyxDQUFBLElBQUksQ0FBQyxHQUFOLENBQVUsV0FBVixFQUF1QixRQUF2QixFQURRO1VBQUEsRUFBQTtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FGVDtBQUFBLFFBS0EsS0FBQSxFQUFPLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQyxHQUFELEdBQUE7bUJBQ04sT0FBTyxDQUFDLEtBQVIsQ0FBYyxTQUFkLEVBQXdCLEdBQUcsQ0FBQyxZQUE1QixFQURNO1VBQUEsRUFBQTtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FMUDtPQURELENBbkJBLENBQUE7QUE0QkEsTUFBQSxJQUFHLENBQUEsUUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUF4QjtlQUNDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBakIsQ0FDQztBQUFBLFVBQUEsU0FBQSxFQUFXLElBQVg7U0FERCxFQUREO09BN0JlO0lBQUEsQ0FBaEIsRUFEMkI7RUFBQSxDQUE1QixDQUFBLENBQUE7QUFBQSIsImZpbGUiOiJjYXJkc19nZW5lcmF0b3IvaW5kZXguanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJhcHAubW9kdWxlICdDYXJkR2VuZXJhdG9yJywgKENhcmRHZW5lcmF0b3IpIC0+XG5cdEBhZGRJbml0aWFsaXplciAtPlxuXHRcdGNvbnNvbGUuZGVidWcgJ0luaXRpYWxpemluZzogQ2FyZEdlbmVyYXRvciBtb2R1bGUuLi4nXG5cblx0XHQjIEBiaW5kICdhbGwnLCA9PlxuXHRcdCMgXHRjb25zb2xlLmxvZyBhcmd1bWVudHNcblxuXHRcdEBjb250cm9sbGVyID0gIG5ldyBDYXJkR2VuZXJhdG9yLkNvbnRyb2xsZXJcblx0XHRAcm91dGVyID0gbmV3IENhcmRHZW5lcmF0b3IuUm91dGVyIGNvbnRyb2xsZXI6IEBjb250cm9sbGVyXG5cblx0XHRAZGF0YSA9IG5ldyBCYWNrYm9uZS5EZWVwTW9kZWwgZGF0YUZyb21TZXJ2ZXJcblxuXHRcdEBjYXJkc1ZpZXcgPSBuZXcgQ2FyZEdlbmVyYXRvci5DYXJkc1ZpZXdcblxuXHRcdCQoXCJhW2hyZWZePScvJ11cIixcImJvZHlcIikuY2xpY2sgIChlKSA9PlxuXHRcdFx0aHJlZiA9ICQoZS50YXJnZXQpLmF0dHIgJ2hyZWYnXG5cdFx0XHRpZiBocmVmLmluZGV4T2YoJy9hcGknKSBpc250IDBcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRcdEByb3V0ZXIubmF2aWdhdGUgaHJlZixcblx0XHRcdFx0XHR0cmlnZ2VyOiB0cnVlXG5cblx0XHQkLmFqYXggXG5cdFx0XHR1cmw6ICcvYXBpL2ZvbnRzLWxpc3QnXG5cdFx0XHRhc3luYzogZmFsc2Vcblx0XHRcdHN1Y2Nlc3M6IChmb250TGlzdCkgPT5cblx0XHRcdFx0QGRhdGEuc2V0ICdmb250c0xpc3QnLCBmb250TGlzdFxuXG5cdFx0XHRlcnJvcjogKHhocikgPT5cblx0XHRcdFx0Y29uc29sZS5lcnJvciAnRXJyb3I6ICcseGhyLnJlc3BvbnNlVGV4dFxuXG5cdFx0aWYgbm90IEJhY2tib25lLmhpc3Rvcnkuc3RhcnRlZFxuXHRcdFx0QmFja2JvbmUuaGlzdG9yeS5zdGFydFxuXHRcdFx0XHRwdXNoU3RhdGU6IHRydWVcbiJdfQ==