(function() {
  var __slice = [].slice;

  this.app.module('shared.generators.textGen', function(TextGen, app, Backbone, Marionette, $, _) {
    var fontsList, generateRandomData, generateRandomTextOptions, prepareData, prepareInitials, renderText, srcData;
    srcData = dataFromServer.appData;
    srcData.textAligns = ['left', 'center', 'right'];
    fontsList = srcData.fontsList;
    generateRandomData = function() {
      var randomCardData, randomNameNum, randomPhoneEnd;
      randomNameNum = app.getRandom(0, srcData.names.length - 1);
      randomPhoneEnd = app.getRandom(0, srcData.names.length - 1);
      if (('' + randomPhoneEnd).length < 2) {
        randomPhoneEnd = '0' + randomPhoneEnd;
      }
      randomCardData = {
        isDefault: false,
        sex: srcData.names[randomNameNum].sex,
        name: srcData.names[randomNameNum].text,
        surname: srcData.surnames[app.getRandom(0, srcData.surnames.length - 1)],
        eMail: srcData.emails[app.getRandom(0, srcData.emails.length - 1)],
        position: srcData.positions[app.getRandom(0, srcData.positions.length - 1)],
        phone: '+7-' + srcData.phones + randomPhoneEnd
      };
      return randomCardData;
    };
    generateRandomTextOptions = function() {
      var randomTextOptions;
      randomTextOptions = {
        isDefault: false,
        textAlign: srcData.textAligns[app.getRandom(0, srcData.textAligns.length - 1)],
        fontFamily: 'sans-serif',
        textBlockOptions: {
          padding: {
            top: app.getRandom(10, 50, 2),
            left: app.getRandom(10, 50, 2),
            bottom: 0,
            right: app.getRandom(10, 50, 2)
          },
          title: {
            fontSize: "" + (app.getRandom(1, 2.5, 2)) + "em",
            color: "rgb(" + (app.getRandom(0, 120)) + "," + (app.getRandom(0, 120)) + "," + (app.getRandom(0, 120)) + ")",
            textBaseline: 'middle',
            lineHeight: app.getRandom(18, 40, 2),
            marginBottom: 0
          },
          body: {
            fontSize: "" + (app.getRandom(0.5, 1.5, 2)) + "em",
            color: "rgb(" + (app.getRandom(0, 160)) + "," + (app.getRandom(0, 160)) + "," + (app.getRandom(0, 160)) + ")",
            textBaseline: 'middle',
            lineHeight: app.getRandom(10, 30, 2)
          }
        }
      };
      return randomTextOptions;
    };
    prepareInitials = function(sex, name, surname) {
      if (sex === 'male') {
        surname = surname;
      } else if (sex === 'female') {
        if (surname.substr(surname.length - 2, surname.length) === 'ий') {
          surname = surname.slice(0, surname.length - 2);
          surname = surname + 'ая';
        } else {
          surname = surname + 'a';
        }
      }
      return name + ' ' + surname;
    };
    prepareData = function(model) {
      var randomData, randomTextOptions;
      if (model.get('data').isDefault) {
        randomData = generateRandomData();
        model.set('data', randomData, {
          silent: true
        });
      }
      if (model.get('generators.textGen').isDefault) {
        randomTextOptions = generateRandomTextOptions();
        model.set('generators.textGen', randomTextOptions, {
          silent: true
        });
      }
      return model.attributes;
    };
    renderText = function(svg, model) {
      var buildHeadingText, buildInfoText, data, flowText, heading, headingProperties, info, infoProperties, maxWidth, top;
      data = model.get('data');
      String.prototype.insert = function(index, string) {
        if (index > 0) {
          return this.substring(0, index) + string + this.substring(index, this.length);
        } else {
          return string + this;
        }
      };
      flowText = function(string, maxWidth, font) {
        var measureText, paragraphBuffer, stringBuffer, testString, testWidth, word, words, _i, _len;
        paragraphBuffer = '';
        stringBuffer = '';
        words = string.split(' ');
        measureText = function(string) {
          var testText, width;
          testText = svg.text(string).font(font);
          width = testText.bbox().width;
          testText.remove();
          return width;
        };
        for (_i = 0, _len = words.length; _i < _len; _i++) {
          word = words[_i];
          testString = paragraphBuffer.length < 1 ? "" + word : "" + paragraphBuffer + " " + word;
          testWidth = measureText(testString);
          if (testWidth > maxWidth) {
            console.log('enter apended', word);
            console.log(testWidth, maxWidth);
            paragraphBuffer = "" + paragraphBuffer + "\n" + word;
          } else {
            paragraphBuffer = testString;
          }
        }
        return paragraphBuffer;
      };
      maxWidth = $(svg.node).width() + 100;
      headingProperties = {
        paddingTop: 20,
        paddingBottom: 0,
        paddingLeft: 0,
        paddingRight: 0,
        marginTop: 0,
        lineHeight: 1,
        font: {
          size: 30
        }
      };
      infoProperties = {
        paddingTop: 0,
        paddingBottom: 0,
        paddingLeft: 0,
        paddingRight: 0,
        marginTop: 0,
        lineHeight: 1,
        font: {
          size: 20
        }
      };
      buildHeadingText = function() {
        var template, text;
        data.sex = data.sex;
        data.name = data.name;
        data.surname = data.surname;
        template = prepareInitials(data.sex, data.name, data.surname);
        text = flowText(template, maxWidth, headingProperties.font);
        return text;
      };
      buildInfoText = function() {
        var paragraph, paragraphs, template, textBlockBuffer, _i, _len;
        data.eMail = data.eMail;
        data.phone = data.phone;
        data.position = data.position;
        template = "E-mail: " + data.eMail + " \nТелефон: " + data.phone + " \nДолжность: " + data.position;
        paragraphs = template.split('\n');
        textBlockBuffer = [];
        for (_i = 0, _len = paragraphs.length; _i < _len; _i++) {
          paragraph = paragraphs[_i];
          paragraph = paragraph.trim();
          paragraph = flowText(paragraph, maxWidth, infoProperties.font);
          textBlockBuffer.push(paragraph);
        }
        paragraphs = textBlockBuffer.join('\n');
        return paragraphs;
      };
      heading = svg.text(buildHeadingText()).leading(headingProperties.lineHeight).fill('#232').move(headingProperties.paddingRight, headingProperties.paddingTop).font(headingProperties.font);
      top = $(heading.node).height();
      return info = svg.text(buildInfoText()).leading(infoProperties.lineHeight).fill('#232').move(infoProperties.paddingRight, infoProperties.paddingTop + headingProperties.paddingTop + top + infoProperties.marginTop).font(infoProperties.font);
    };
    return this.draw = function() {
      var args, model, svg;
      svg = arguments[0], model = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
      prepareData.call(this, model);
      return renderText.call(this, svg, model, args);
    };
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlZC9nZW5lcmF0b3JzL3RleHQtZ2VuZXJlYXRvci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLGtCQUFBOztBQUFBLEVBQUEsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFMLENBQVksMkJBQVosRUFBeUMsU0FBQyxPQUFELEVBQVUsR0FBVixFQUFlLFFBQWYsRUFBeUIsVUFBekIsRUFBcUMsQ0FBckMsRUFBd0MsQ0FBeEMsR0FBQTtBQUd4QyxRQUFBLDJHQUFBO0FBQUEsSUFBQSxPQUFBLEdBQVUsY0FBYyxDQUFDLE9BQXpCLENBQUE7QUFBQSxJQUNBLE9BQU8sQ0FBQyxVQUFSLEdBQXFCLENBQUMsTUFBRCxFQUFRLFFBQVIsRUFBaUIsT0FBakIsQ0FEckIsQ0FBQTtBQUFBLElBRUEsU0FBQSxHQUFZLE9BQU8sQ0FBQyxTQUZwQixDQUFBO0FBQUEsSUFRQSxrQkFBQSxHQUFxQixTQUFBLEdBQUE7QUFFcEIsVUFBQSw2Q0FBQTtBQUFBLE1BQUEsYUFBQSxHQUFnQixHQUFHLENBQUMsU0FBSixDQUFjLENBQWQsRUFBaUIsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFkLEdBQXFCLENBQXRDLENBQWhCLENBQUE7QUFBQSxNQUNBLGNBQUEsR0FBaUIsR0FBRyxDQUFDLFNBQUosQ0FBYyxDQUFkLEVBQWlCLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBZCxHQUFxQixDQUF0QyxDQURqQixDQUFBO0FBRUEsTUFBQSxJQUF5QyxDQUFDLEVBQUEsR0FBSSxjQUFMLENBQW9CLENBQUMsTUFBckIsR0FBOEIsQ0FBdkU7QUFBQSxRQUFBLGNBQUEsR0FBaUIsR0FBQSxHQUFNLGNBQXZCLENBQUE7T0FGQTtBQUFBLE1BTUEsY0FBQSxHQUNDO0FBQUEsUUFBQSxTQUFBLEVBQVcsS0FBWDtBQUFBLFFBQ0EsR0FBQSxFQUFLLE9BQU8sQ0FBQyxLQUFPLENBQUEsYUFBQSxDQUFlLENBQUMsR0FEcEM7QUFBQSxRQUVBLElBQUEsRUFBTyxPQUFP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QUFoQixDQUFBLENBakdOLENBQUE7YUFtR0EsSUFBQSxHQUFPLEdBQUcsQ0FBQyxJQUFKLENBQVUsYUFBQSxDQUFBLENBQVYsQ0FDUCxDQUFDLE9BRE0sQ0FDRyxjQUFjLENBQUMsVUFEbEIsQ0FFUCxDQUFDLElBRk0sQ0FFRCxNQUZDLENBR1AsQ0FBQyxJQUhNLENBR0QsY0FBYyxDQUFDLFlBSGQsRUFHNEIsY0FBYyxDQUFDLFVBQWYsR0FBMEIsaUJBQWlCLENBQUMsVUFBNUMsR0FBdUQsR0FBdkQsR0FBMkQsY0FBYyxDQUFDLFNBSHRHLENBSVAsQ0FBQyxJQUpNLENBSUQsY0FBYyxDQUFDLElBSmQsRUFuSEs7SUFBQSxDQXZGYixDQUFBO1dBbU5BLElBQUMsQ0FBQSxJQUFELEdBQVEsU0FBQSxHQUFBO0FBRVAsVUFBQSxnQkFBQTtBQUFBLE1BRlEsb0JBQUksc0JBQU0sOERBRWxCLENBQUE7QUFBQSxNQUFBLFdBQVcsQ0FBQyxJQUFaLENBQWlCLElBQWpCLEVBQW9CLEtBQXBCLENBQUEsQ0FBQTthQUVBLFVBQVUsQ0FBQyxJQUFYLENBQWdCLElBQWhCLEVBQW1CLEdBQW5CLEVBQXdCLEtBQXhCLEVBQStCLElBQS9CLEVBSk87SUFBQSxFQXROZ0M7RUFBQSxDQUF6QyxDQUFBLENBQUE7QUFBQSIsImZpbGUiOiJzaGFyZWQvZ2VuZXJhdG9ycy90ZXh0LWdlbmVyZWF0b3IuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJAYXBwLm1vZHVsZSAnc2hhcmVkLmdlbmVyYXRvcnMudGV4dEdlbicsIChUZXh0R2VuLCBhcHAsIEJhY2tib25lLCBNYXJpb25ldHRlLCAkLCBfKSAtPlx0XG5cdFxuXHQjIFByaXZhdCBwcm9wZXJ0aWVzXG5cdHNyY0RhdGEgPSBkYXRhRnJvbVNlcnZlci5hcHBEYXRhXG5cdHNyY0RhdGEudGV4dEFsaWducyA9IFsnbGVmdCcsJ2NlbnRlcicsJ3JpZ2h0J11cblx0Zm9udHNMaXN0ID0gc3JjRGF0YS5mb250c0xpc3RcblxuXHQjIFB1YmxpYyBwcm9wZXJ0aWVzXG5cdCMgZW1wdHlcblxuXHQjIFByaXZhdCBtZXRob2RzXG5cdGdlbmVyYXRlUmFuZG9tRGF0YSA9IC0+XHRcblx0XHQjbG9jYWwgdmFyaWFibGVzXG5cdFx0cmFuZG9tTmFtZU51bSA9IGFwcC5nZXRSYW5kb20oMCwgc3JjRGF0YS5uYW1lcy5sZW5ndGgtMSApXG5cdFx0cmFuZG9tUGhvbmVFbmQgPSBhcHAuZ2V0UmFuZG9tKDAsIHNyY0RhdGEubmFtZXMubGVuZ3RoLTEgKVxuXHRcdHJhbmRvbVBob25lRW5kID0gJzAnICsgcmFuZG9tUGhvbmVFbmQgaWYgKCcnKyByYW5kb21QaG9uZUVuZCkubGVuZ3RoIDwgMiBcblx0XHQjZW5kIGxvY2FsIHZhcmlhYmxlc1xuXG5cdFx0I2dlbmVyYXRlIG5ldyByYW5kb20gY2FyZERhdGFcblx0XHRyYW5kb21DYXJkRGF0YSA9XG5cdFx0XHRpc0RlZmF1bHQ6IGZhbHNlXG5cdFx0XHRzZXg6IHNyY0RhdGEubmFtZXNbIHJhbmRvbU5hbWVOdW0gXS5zZXhcblx0XHRcdG5hbWU6ICBzcmNEYXRhLm5hbWVzWyByYW5kb21OYW1lTnVtIF0udGV4dFxuXHRcdFx0c3VybmFtZTogIHNyY0RhdGEuc3VybmFtZXNbIGFwcC5nZXRSYW5kb20oMCwgc3JjRGF0YS5zdXJuYW1lcy5sZW5ndGgtMSApIF1cblx0XHRcdGVNYWlsOiAgc3JjRGF0YS5lbWFpbHNbIGFwcC5nZXRSYW5kb20oMCwgc3JjRGF0YS5lbWFpbHMubGVuZ3RoLTEgKSBdXG5cdFx0XHRwb3NpdGlvbjogIHNyY0RhdGEucG9zaXRpb25zWyBhcHAuZ2V0UmFuZG9tKDAsIHNyY0RhdGEucG9zaXRpb25zLmxlbmd0aC0xICkgXVxuXHRcdFx0cGhvbmU6ICcrNy0nICsgc3JjRGF0YS5waG9uZXMgKyByYW5kb21QaG9uZUVuZFxuXG5cdFx0cmFuZG9tQ2FyZERhdGFcblxuXHRnZW5lcmF0ZVJhbmRvbVRleHRPcHRpb25zID0gLT5cblx0XHQjbG9jYWwgdmFyaWFibGVzXG5cdFx0I2VuZCBsb2NhbCB2YXJpYWJsZXNcblxuXG5cdFx0I2dlbmVyYXRlIG5ldyByYW5kb20gdGV4dCBvcHRpb25zXG5cdFx0cmFuZG9tVGV4dE9wdGlvbnMgPVxuXHRcdFx0aXNEZWZhdWx0OiBmYWxzZVxuXHRcdFx0dGV4dEFsaWduOiBzcmNEYXRhLnRleHRBbGlnbnNbYXBwLmdldFJhbmRvbSgwLHNyY0RhdGEudGV4dEFsaWducy5sZW5ndGgtMSldXG5cdFx0XHRmb250RmFtaWx5OiAnc2Fucy1zZXJpZidcblx0XHRcdCMgZm9udEZhbWlseTogJycrIGZvbnRzTGlzdFsgYXBwLmdldFJhbmRvbSgwLCBmb250c0xpc3QubGVuZ3RoLTEpIF1cblxuXHRcdFx0dGV4dEJsb2NrT3B0aW9uczpcblx0XHRcdFx0cGFkZGluZzpcblx0XHRcdFx0XHR0b3A6IGFwcC5nZXRSYW5kb20oMTAsIDUwLCAyKVxuXHRcdFx0XHRcdGxlZnQ6IGFwcC5nZXRSYW5kb20oMTAsIDUwLCAyKVxuXHRcdFx0XHRcdGJvdHRvbTogMFxuXHRcdFx0XHRcdHJpZ2h0OiBhcHAuZ2V0UmFuZG9tKDEwLCA1MCwgMilcblx0XHRcdFx0dGl0bGU6XG5cdFx0XHRcdFx0Zm9udFNpemU6IFwiI3thcHAuZ2V0UmFuZG9tKDEsIDIuNSwgMil9ZW1cIlxuXHRcdFx0XHRcdGNvbG9yOiBcInJnYigjeyBhcHAuZ2V0UmFuZG9tKDAsIDEyMCkgfSwjeyBhcHAuZ2V0UmFuZG9tKDAsIDEyMCkgfSwjeyBhcHAuZ2V0UmFuZG9tKDAsIDEyMCkgfSlcIlxuXHRcdFx0XHRcdHRleHRCYXNlbGluZTogJ21pZGRsZScgXG5cdFx0XHRcdFx0bGluZUhlaWdodDogYXBwLmdldFJhbmRvbSgxOCwgNDAgLCAyKVxuXHRcdFx0XHRcdG1hcmdpbkJvdHRvbTogMFxuXHRcdFx0XHRib2R5OlxuXHRcdFx0XHRcdGZvbnRTaXplOiBcIiN7YXBwLmdldFJhbmRvbSgwLjUsIDEuNSwgMil9ZW1cIlxuXHRcdFx0XHRcdGNvbG9yOiBcInJnYigjeyBhcHAuZ2V0UmFuZG9tKDAsIDE2MCkgfSwjeyBhcHAuZ2V0UmFuZG9tKDAsIDE2MCkgfSwjeyBhcHAuZ2V0UmFuZG9tKDAsIDE2MCkgfSlcIlxuXHRcdFx0XHRcdHRleHRCYXNlbGluZTogJ21pZGRsZScgXG5cdFx0XHRcdFx0bGluZUhlaWdodDogYXBwLmdldFJhbmRvbSgxMCwgMzAgLCAyKVxuXG5cdFx0cmFuZG9tVGV4dE9wdGlvbnNcdFxuXG5cdHByZXBhcmVJbml0aWFscyA9IChzZXgsIG5hbWUsIHN1cm5hbWUpIC0+XG5cdFx0aWYgc2V4IGlzICdtYWxlJ1xuXHRcdFx0c3VybmFtZSA9IHN1cm5hbWVcblxuXHRcdGVsc2UgaWYgc2V4IGlzICdmZW1hbGUnXG5cdFx0XHRpZiBzdXJuYW1lLnN1YnN0cihzdXJuYW1lLmxlbmd0aC0yLHN1cm5hbWUubGVuZ3RoKSBpcyAn0LjQuSdcblx0XHRcdFx0c3VybmFtZSA9IHN1cm5hbWUuc2xpY2UoMCxzdXJuYW1lLmxlbmd0aC0yKVxuXHRcdFx0XHRzdXJuYW1lID0gc3VybmFtZSsn0LDRjydcblx0XHRcdGVsc2Vcblx0XHRcdFx0c3VybmFtZSA9IHN1cm5hbWUrJ2EnXG5cblx0XHRuYW1lICsgJyAnICsgc3VybmFtZVxuXHRcdFxuXHRwcmVwYXJlRGF0YSA9IChtb2RlbCkgLT5cblx0XHRpZiBtb2RlbC5nZXQoJ2RhdGEnKS5pc0RlZmF1bHRcblx0XHRcdCNzZXQgbmV3IHJhbmRvbSBjYXJkIGRhdGEgdG8gbW9kZWxcblx0XHRcdHJhbmRvbURhdGEgPSBnZW5lcmF0ZVJhbmRvbURhdGEoKVxuXHRcdFx0bW9kZWwuc2V0ICdkYXRhJywgcmFuZG9tRGF0YSxcblx0XHRcdFx0c2lsZW50OiB0cnVlXHRcdFx0XHRcblxuXHRcdGlmIG1vZGVsLmdldCgnZ2VuZXJhdG9ycy50ZXh0R2VuJykuaXNEZWZhdWx0XG5cdFx0XHQjc2V0IG5ldyByYW5kb20gdGV4dCBvcHRpb25zIHRvIG1vZGVsXG5cdFx0XHRyYW5kb21UZXh0T3B0aW9ucyA9IGdlbmVyYXRlUmFuZG9tVGV4dE9wdGlvbnMoKVxuXHRcdFx0bW9kZWwuc2V0ICdnZW5lcmF0b3JzLnRleHRHZW4nLCByYW5kb21UZXh0T3B0aW9ucyxcblx0XHRcdFx0c2lsZW50OiB0cnVlXHRcdFx0XG5cblx0XHRtb2RlbC5hdHRyaWJ1dGVzXG5cblx0cmVuZGVyVGV4dCA9IChzdmcsIG1vZGVsKSAtPlxuXHRcdCMgaWYgZm9udEZhbWlseSBpcyAnc2Fucy1zZXJpZidcblx0XHQjIFx0Zm9udCA9IGZvbnRGYW1pbHlcblx0XHQjIGVsc2UgXG5cdFx0IyBcdGZvbnQgPSAnXCInK2ZvbnRGYW1pbHkrJ1wiJ1xuXG5cdFx0IyBzd2l0Y2ggdGV4dEFsaWduXG5cdFx0IyBcdHdoZW4gJ2xlZnQnXG5cdFx0IyBcdFx0eCA9IHRleHRCbG9ja09wdGlvbnMucGFkZGluZy5sZWZ0XG5cdFx0IyBcdFx0eSA9IHRleHRCbG9ja09wdGlvbnMucGFkZGluZy50b3Bcblx0XHQjIFx0d2hlbiAnY2VudGVyJyBcblx0XHQjIFx0XHR4ID0gY2FudmFzLndpZHRoLzJcblx0XHQjIFx0XHR5ID0gdGV4dEJsb2NrT3B0aW9ucy5wYWRkaW5nLnRvcFxuXHRcdCMgXHR3aGVuICdyaWdodCdcblx0XHQjIFx0XHR4ID0gY2FudmFzLndpZHRoLXRleHRCbG9ja09wdGlvbnMucGFkZGluZy5yaWdodFxuXHRcdCMgXHRcdHkgPSB0ZXh0QmxvY2tPcHRpb25zLnBhZGRpbmcudG9wXG5cdFx0ZGF0YSA9IG1vZGVsLmdldCAnZGF0YSdcblxuXHRcdFN0cmluZy5wcm90b3R5cGUuaW5zZXJ0ID0gKGluZGV4LCBzdHJpbmcpIC0+XG5cdFx0XHRpZiAoaW5kZXggPiAwKVxuXHRcdFx0XHRyZXR1cm4gQHN1YnN0cmluZygwLCBpbmRleCkgKyBzdHJpbmcgKyBAc3Vic3RyaW5nKGluZGV4LCBAbGVuZ3RoKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0cmV0dXJuIHN0cmluZyArIEBcdFx0XG5cblxuXHRcdGZsb3dUZXh0ID0gKHN0cmluZywgbWF4V2lkdGgsIGZvbnQpIC0+XG5cdFx0XHRwYXJhZ3JhcGhCdWZmZXIgPSAnJ1xuXHRcdFx0c3RyaW5nQnVmZmVyID0gJydcblx0XHRcdHdvcmRzID0gc3RyaW5nLnNwbGl0ICcgJ1xuXG5cblx0XHRcdCMgVE9ETyBDbGVhciBzdHJpbmdidWZmZXIgYWZ0ZXIgZW50ZXJcblx0XG5cdFx0XHRtZWFzdXJlVGV4dCA9IChzdHJpbmcpIC0+XG5cdFx0XHRcdHRlc3RUZXh0ID0gc3ZnLnRleHQoc3RyaW5nKS5mb250IGZvbnRcblx0XHRcdFx0d2lkdGggPSB0ZXN0VGV4dC5iYm94KCkud2lkdGhcblx0XHRcdFx0dGVzdFRleHQucmVtb3ZlKClcblx0XHRcdFx0d2lkdGhcblxuXHRcdFx0Zm9yIHdvcmQgaW4gd29yZHNcblx0XHRcdFx0dGVzdFN0cmluZyA9IGlmIHBhcmFncmFwaEJ1ZmZlci5sZW5ndGggPCAxIHRoZW4gXCIje3dvcmR9XCIgZWxzZSBcIiN7cGFyYWdyYXBoQnVmZmVyfSAje3dvcmR9XCJcblx0XHRcdFx0dGVzdFdpZHRoID0gbWVhc3VyZVRleHQgdGVzdFN0cmluZ1xuXHRcdFx0XHQjIGNvbnNvbGUubG9nIHdpZHRoLCBtYXhXaWR0aFxuXG5cdFx0XHRcdGlmIHRlc3RXaWR0aCA+IG1heFdpZHRoXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgJ2VudGVyIGFwZW5kZWQnLCB3b3JkXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgdGVzdFdpZHRoLCBtYXhXaWR0aFxuXHRcdFx0XHRcdHBhcmFncmFwaEJ1ZmZlciA9IFwiI3twYXJhZ3JhcGhCdWZmZXJ9XFxuI3t3b3JkfVwiXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRwYXJhZ3JhcGhCdWZmZXIgPSB0ZXN0U3RyaW5nXG5cblx0XHRcdCMgY29uc29sZS5sb2cgcGFyYWdyYXBoQnVmZmVyXG5cdFx0XHRwYXJhZ3JhcGhCdWZmZXJcdFx0XG5cblx0XHRtYXhXaWR0aCA9ICQoc3ZnLm5vZGUpLndpZHRoKCkrMTAwXG5cblxuXHRcdGhlYWRpbmdQcm9wZXJ0aWVzID0gXG5cdFx0XHRwYWRkaW5nVG9wOiAyMFxuXHRcdFx0cGFkZGluZ0JvdHRvbTogMFxuXHRcdFx0cGFkZGluZ0xlZnQ6IDBcblx0XHRcdHBhZGRpbmdSaWdodDogMFxuXHRcdFx0bWFyZ2luVG9wOiAwXG5cdFx0XHRsaW5lSGVpZ2h0OiAxXG5cdFx0XHRmb250OlxuXHRcdFx0XHRzaXplOiAzMFxuXG5cdFx0aW5mb1Byb3BlcnRpZXMgPSBcblx0XHRcdHBhZGRpbmdUb3A6IDBcblx0XHRcdHBhZGRpbmdCb3R0b206IDBcblx0XHRcdHBhZGRpbmdMZWZ0OiAwXG5cdFx0XHRwYWRkaW5nUmlnaHQ6IDBcblx0XHRcdG1hcmdpblRvcDogMFxuXHRcdFx0bGluZUhlaWdodDogMVxuXHRcdFx0Zm9udDpcblx0XHRcdFx0c2l6ZTogMjBcdFx0XG5cdFx0XG5cdFx0YnVpbGRIZWFkaW5nVGV4dCA9IC0+XG5cdFx0XHRkYXRhLnNleCA9IGRhdGEuc2V4XG5cdFx0XHRkYXRhLm5hbWUgPSBkYXRhLm5hbWVcblx0XHRcdGRhdGEuc3VybmFtZSA9IGRhdGEuc3VybmFtZVxuXG5cdFx0XHR0ZW1wbGF0ZSA9IHByZXBhcmVJbml0aWFscyBkYXRhLnNleCwgZGF0YS5uYW1lLCBkYXRhLnN1cm5hbWVcblxuXHRcdFx0dGV4dCA9IGZsb3dUZXh0IHRlbXBsYXRlLCBtYXhXaWR0aCwgaGVhZGluZ1Byb3BlcnRpZXMuZm9udFxuXHRcdFx0dGV4dFxuXG5cdFx0YnVpbGRJbmZvVGV4dCA9IC0+XG5cblx0XHRcdGRhdGEuZU1haWwgPSBkYXRhLmVNYWlsXG5cdFx0XHRkYXRhLnBob25lID0gZGF0YS5waG9uZVxuXHRcdFx0ZGF0YS5wb3NpdGlvbiA9IGRhdGEucG9zaXRpb25cblxuXHRcdFx0dGVtcGxhdGUgPSBcIkUtbWFpbDogI3sgZGF0YS5lTWFpbCB9IFxcbtCi0LXQu9C10YTQvtC9OiAjeyBkYXRhLnBob25lIH0gXFxu0JTQvtC70LbQvdC+0YHRgtGMOiAjeyBkYXRhLnBvc2l0aW9uIH1cIlxuXG5cdFx0XHRwYXJhZ3JhcGhzID0gdGVtcGxhdGUuc3BsaXQgJ1xcbidcblxuXHRcdFx0dGV4dEJsb2NrQnVmZmVyID0gW11cblx0XHRcdGZvciBwYXJhZ3JhcGggaW4gcGFyYWdyYXBoc1xuXHRcdFx0XHRwYXJhZ3JhcGggPSBwYXJhZ3JhcGgudHJpbSgpXG5cdFx0XHRcdHBhcmFncmFwaCA9IGZsb3dUZXh0IHBhcmFncmFwaCwgbWF4V2lkdGgsIGluZm9Qcm9wZXJ0aWVzLmZvbnRcblx0XHRcdFx0dGV4dEJsb2NrQnVmZmVyLnB1c2ggcGFyYWdyYXBoXG5cblx0XHRcdHBhcmFncmFwaHMgPSB0ZXh0QmxvY2tCdWZmZXIuam9pbignXFxuJykgXG5cdFx0XHRwYXJhZ3JhcGhzXG5cblxuXHRcdGhlYWRpbmcgPSBzdmcudGV4dCggYnVpbGRIZWFkaW5nVGV4dCgpIClcblx0XHQubGVhZGluZyggaGVhZGluZ1Byb3BlcnRpZXMubGluZUhlaWdodCApXG5cdFx0LmZpbGwoJyMyMzInKVxuXHRcdC5tb3ZlIGhlYWRpbmdQcm9wZXJ0aWVzLnBhZGRpbmdSaWdodCwgaGVhZGluZ1Byb3BlcnRpZXMucGFkZGluZ1RvcFxuXHRcdC5mb250IGhlYWRpbmdQcm9wZXJ0aWVzLmZvbnRcblxuXHRcdHRvcCA9ICQoaGVhZGluZy5ub2RlKS5oZWlnaHQoKVxuXG5cdFx0aW5mbyA9IHN2Zy50ZXh0KCBidWlsZEluZm9UZXh0KCkgKVxuXHRcdC5sZWFkaW5nKCBpbmZvUHJvcGVydGllcy5saW5lSGVpZ2h0IClcblx0XHQuZmlsbCgnIzIzMicpXG5cdFx0Lm1vdmUgaW5mb1Byb3BlcnRpZXMucGFkZGluZ1JpZ2h0LCBpbmZvUHJvcGVydGllcy5wYWRkaW5nVG9wK2hlYWRpbmdQcm9wZXJ0aWVzLnBhZGRpbmdUb3ArdG9wK2luZm9Qcm9wZXJ0aWVzLm1hcmdpblRvcFxuXHRcdC5mb250IGluZm9Qcm9wZXJ0aWVzLmZvbnRcblxuXHRcdFxuXG5cdCMgUHVibGljIG1ldGhvZHNcblx0QGRyYXcgPSAoc3ZnLG1vZGVsLGFyZ3MuLi4pIC0+XG5cblx0XHRwcmVwYXJlRGF0YS5jYWxsIEAsIG1vZGVsXG5cblx0XHRyZW5kZXJUZXh0LmNhbGwgQCwgc3ZnLCBtb2RlbCwgYXJnc1x0XG5cbiJdfQ==