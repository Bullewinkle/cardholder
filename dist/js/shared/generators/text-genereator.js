(function() {
  var __slice = [].slice;

  this.app.module('shared.generators.textGen', function(TextGen, app, Backbone, Marionette, $, _) {
    var fontsList, generateRandomData, generateRandomTextOptions, prepareData, prepareInitials, renderText, srcData;
    srcData = dataFromServer.appData;
    srcData.textAligns = ['left', 'center', 'right'];
    fontsList = srcData.fontsList;
    generateRandomData = function() {
      var randomCardData, randomNameNum, randomPhoneEnd;
      randomNameNum = app.getRandom(0, srcData.names.length - 1);
      randomPhoneEnd = app.getRandom(0, srcData.names.length - 1);
      if (('' + randomPhoneEnd).length < 2) {
        randomPhoneEnd = '0' + randomPhoneEnd;
      }
      randomCardData = {
        isDefault: false,
        sex: srcData.names[randomNameNum].sex,
        name: srcData.names[randomNameNum].text,
        surname: srcData.surnames[app.getRandom(0, srcData.surnames.length - 1)],
        eMail: srcData.emails[app.getRandom(0, srcData.emails.length - 1)],
        position: srcData.positions[app.getRandom(0, srcData.positions.length - 1)],
        phone: '+7-' + srcData.phones + randomPhoneEnd
      };
      return randomCardData;
    };
    generateRandomTextOptions = function() {
      var randomTextOptions;
      randomTextOptions = {
        isDefault: false,
        textAlign: srcData.textAligns[app.getRandom(0, srcData.textAligns.length - 1)],
        fontFamily: 'sans-serif',
        textBlockOptions: {
          padding: {
            top: app.getRandom(10, 50, 2),
            left: app.getRandom(10, 50, 2),
            bottom: 0,
            right: app.getRandom(10, 50, 2)
          },
          title: {
            fontSize: "" + (app.getRandom(1, 2.5, 2)) + "em",
            color: "rgb(" + (app.getRandom(0, 120)) + "," + (app.getRandom(0, 120)) + "," + (app.getRandom(0, 120)) + ")",
            textBaseline: 'middle',
            lineHeight: app.getRandom(18, 40, 2),
            marginBottom: 0
          },
          body: {
            fontSize: "" + (app.getRandom(0.5, 1.5, 2)) + "em",
            color: "rgb(" + (app.getRandom(0, 160)) + "," + (app.getRandom(0, 160)) + "," + (app.getRandom(0, 160)) + ")",
            textBaseline: 'middle',
            lineHeight: app.getRandom(10, 30, 2)
          }
        }
      };
      return randomTextOptions;
    };
    prepareInitials = function(sex, name, surname) {
      if (sex === 'male') {
        surname = surname;
      } else if (sex === 'female') {
        if (surname.substr(surname.length - 2, surname.length) === 'ий') {
          surname = surname.slice(0, surname.length - 2);
          surname = surname + 'ая';
        } else {
          surname = surname + 'a';
        }
      }
      return name + ' ' + surname;
    };
    prepareData = function(model) {
      var randomData, randomTextOptions;
      if (model.get('data').isDefault) {
        randomData = generateRandomData();
        model.set('data', randomData, {
          silent: true
        });
      }
      if (model.get('generators.textGen').isDefault) {
        randomTextOptions = generateRandomTextOptions();
        model.set('generators.textGen', randomTextOptions, {
          silent: true
        });
      }
      return model.attributes;
    };
    renderText = function(svg, model) {
      var body, data, heading;
      data = model.get('data');
      heading = svg.text(function() {
        this.tspan(prepareInitials(data.sex, data.name, data.surname)).fill('#232').newLine().dx(20);
        return this.font({
          size: 30
        });
      });
      body = svg.text("E-mail: " + data.eMail + " \nТелефон: " + data.phone + " \nДолжность: " + data.position).leading(0.5).attr({
        width: 10
      }).move(20, 60).font({
        size: 20
      });
      if (!window.svgBody) {
        return window.svgBody = body;
      }
    };
    return this.draw = function() {
      var args, model, svg;
      svg = arguments[0], model = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
      prepareData.call(this, model);
      return renderText.call(this, svg, model, args);
    };
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlZC9nZW5lcmF0b3JzL3RleHQtZ2VuZXJlYXRvci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLGtCQUFBOztBQUFBLEVBQUEsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFMLENBQVksMkJBQVosRUFBeUMsU0FBQyxPQUFELEVBQVUsR0FBVixFQUFlLFFBQWYsRUFBeUIsVUFBekIsRUFBcUMsQ0FBckMsRUFBd0MsQ0FBeEMsR0FBQTtBQUd4QyxRQUFBLDJHQUFBO0FBQUEsSUFBQSxPQUFBLEdBQVUsY0FBYyxDQUFDLE9BQXpCLENBQUE7QUFBQSxJQUNBLE9BQU8sQ0FBQyxVQUFSLEdBQXFCLENBQUMsTUFBRCxFQUFRLFFBQVIsRUFBaUIsT0FBakIsQ0FEckIsQ0FBQTtBQUFBLElBRUEsU0FBQSxHQUFZLE9BQU8sQ0FBQyxTQUZwQixDQUFBO0FBQUEsSUFRQSxrQkFBQSxHQUFxQixTQUFBLEdBQUE7QUFFcEIsVUFBQSw2Q0FBQTtBQUFBLE1BQUEsYUFBQSxHQUFnQixHQUFHLENBQUMsU0FBSixDQUFjLENBQWQsRUFBaUIsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFkLEdBQXFCLENBQXRDLENBQWhCLENBQUE7QUFBQSxNQUNBLGNBQUEsR0FBaUIsR0FBRyxDQUFDLFNBQUosQ0FBYyxDQUFkLEVBQWlCLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBZCxHQUFxQixDQUF0QyxDQURqQixDQUFBO0FBRUEsTUFBQSxJQUF5QyxDQUFDLEVBQUEsR0FBSSxjQUFMLENBQW9CLENBQUMsTUFBckIsR0FBOEIsQ0FBdkU7QUFBQSxRQUFBLGNBQUEsR0FBaUIsR0FBQSxHQUFNLGNBQXZCLENBQUE7T0FGQTtBQUFBLE1BTUEsY0FBQSxHQUNDO0FBQUEsUUFBQSxTQUFBLEVBQVcsS0FBWDtBQUFBLFFBQ0EsR0FBQSxFQUFLLE9BQU8sQ0FBQyxLQUFPLENBQUEsYUFBQSxDQUFlLENBQUMsR0FEcEM7QUFBQSxRQUVBLElBQUEsRUFBTyxPQUFP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REYsQ0FFUCxDQUFDLElBRk0sQ0FHTjtBQUFBLFFBQUEsS0FBQSxFQUFPLEVBQVA7T0FITSxDQUlQLENBQUMsSUFKTSxDQUlELEVBSkMsRUFJRyxFQUpILENBS1AsQ0FBQyxJQUxNLENBTU47QUFBQSxRQUFBLElBQUEsRUFBTSxFQUFOO09BTk0sQ0FUUCxDQUFBO0FBaUJBLE1BQUEsSUFBQSxDQUFBLE1BQW1DLENBQUMsT0FBcEM7ZUFBQSxNQUFNLENBQUMsT0FBUCxHQUFpQixLQUFqQjtPQWpDWTtJQUFBLENBdkZiLENBQUE7V0EySEEsSUFBQyxDQUFBLElBQUQsR0FBUSxTQUFBLEdBQUE7QUFFUCxVQUFBLGdCQUFBO0FBQUEsTUFGUSxvQkFBSSxzQkFBTSw4REFFbEIsQ0FBQTtBQUFBLE1BQUEsV0FBVyxDQUFDLElBQVosQ0FBaUIsSUFBakIsRUFBb0IsS0FBcEIsQ0FBQSxDQUFBO2FBRUEsVUFBVSxDQUFDLElBQVgsQ0FBZ0IsSUFBaEIsRUFBbUIsR0FBbkIsRUFBd0IsS0FBeEIsRUFBK0IsSUFBL0IsRUFKTztJQUFBLEVBOUhnQztFQUFBLENBQXpDLENBQUEsQ0FBQTtBQUFBIiwiZmlsZSI6InNoYXJlZC9nZW5lcmF0b3JzL3RleHQtZ2VuZXJlYXRvci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkBhcHAubW9kdWxlICdzaGFyZWQuZ2VuZXJhdG9ycy50ZXh0R2VuJywgKFRleHRHZW4sIGFwcCwgQmFja2JvbmUsIE1hcmlvbmV0dGUsICQsIF8pIC0+XHRcblx0XG5cdCMgUHJpdmF0IHByb3BlcnRpZXNcblx0c3JjRGF0YSA9IGRhdGFGcm9tU2VydmVyLmFwcERhdGFcblx0c3JjRGF0YS50ZXh0QWxpZ25zID0gWydsZWZ0JywnY2VudGVyJywncmlnaHQnXVxuXHRmb250c0xpc3QgPSBzcmNEYXRhLmZvbnRzTGlzdFxuXG5cdCMgUHVibGljIHByb3BlcnRpZXNcblx0IyBlbXB0eVxuXG5cdCMgUHJpdmF0IG1ldGhvZHNcblx0Z2VuZXJhdGVSYW5kb21EYXRhID0gLT5cdFxuXHRcdCNsb2NhbCB2YXJpYWJsZXNcblx0XHRyYW5kb21OYW1lTnVtID0gYXBwLmdldFJhbmRvbSgwLCBzcmNEYXRhLm5hbWVzLmxlbmd0aC0xIClcblx0XHRyYW5kb21QaG9uZUVuZCA9IGFwcC5nZXRSYW5kb20oMCwgc3JjRGF0YS5uYW1lcy5sZW5ndGgtMSApXG5cdFx0cmFuZG9tUGhvbmVFbmQgPSAnMCcgKyByYW5kb21QaG9uZUVuZCBpZiAoJycrIHJhbmRvbVBob25lRW5kKS5sZW5ndGggPCAyIFxuXHRcdCNlbmQgbG9jYWwgdmFyaWFibGVzXG5cblx0XHQjZ2VuZXJhdGUgbmV3IHJhbmRvbSBjYXJkRGF0YVxuXHRcdHJhbmRvbUNhcmREYXRhID1cblx0XHRcdGlzRGVmYXVsdDogZmFsc2Vcblx0XHRcdHNleDogc3JjRGF0YS5uYW1lc1sgcmFuZG9tTmFtZU51bSBdLnNleFxuXHRcdFx0bmFtZTogIHNyY0RhdGEubmFtZXNbIHJhbmRvbU5hbWVOdW0gXS50ZXh0XG5cdFx0XHRzdXJuYW1lOiAgc3JjRGF0YS5zdXJuYW1lc1sgYXBwLmdldFJhbmRvbSgwLCBzcmNEYXRhLnN1cm5hbWVzLmxlbmd0aC0xICkgXVxuXHRcdFx0ZU1haWw6ICBzcmNEYXRhLmVtYWlsc1sgYXBwLmdldFJhbmRvbSgwLCBzcmNEYXRhLmVtYWlscy5sZW5ndGgtMSApIF1cblx0XHRcdHBvc2l0aW9uOiAgc3JjRGF0YS5wb3NpdGlvbnNbIGFwcC5nZXRSYW5kb20oMCwgc3JjRGF0YS5wb3NpdGlvbnMubGVuZ3RoLTEgKSBdXG5cdFx0XHRwaG9uZTogJys3LScgKyBzcmNEYXRhLnBob25lcyArIHJhbmRvbVBob25lRW5kXG5cblx0XHRyYW5kb21DYXJkRGF0YVxuXG5cdGdlbmVyYXRlUmFuZG9tVGV4dE9wdGlvbnMgPSAtPlxuXHRcdCNsb2NhbCB2YXJpYWJsZXNcblx0XHQjZW5kIGxvY2FsIHZhcmlhYmxlc1xuXG5cblx0XHQjZ2VuZXJhdGUgbmV3IHJhbmRvbSB0ZXh0IG9wdGlvbnNcblx0XHRyYW5kb21UZXh0T3B0aW9ucyA9XG5cdFx0XHRpc0RlZmF1bHQ6IGZhbHNlXG5cdFx0XHR0ZXh0QWxpZ246IHNyY0RhdGEudGV4dEFsaWduc1thcHAuZ2V0UmFuZG9tKDAsc3JjRGF0YS50ZXh0QWxpZ25zLmxlbmd0aC0xKV1cblx0XHRcdGZvbnRGYW1pbHk6ICdzYW5zLXNlcmlmJ1xuXHRcdFx0IyBmb250RmFtaWx5OiAnJysgZm9udHNMaXN0WyBhcHAuZ2V0UmFuZG9tKDAsIGZvbnRzTGlzdC5sZW5ndGgtMSkgXVxuXG5cdFx0XHR0ZXh0QmxvY2tPcHRpb25zOlxuXHRcdFx0XHRwYWRkaW5nOlxuXHRcdFx0XHRcdHRvcDogYXBwLmdldFJhbmRvbSgxMCwgNTAsIDIpXG5cdFx0XHRcdFx0bGVmdDogYXBwLmdldFJhbmRvbSgxMCwgNTAsIDIpXG5cdFx0XHRcdFx0Ym90dG9tOiAwXG5cdFx0XHRcdFx0cmlnaHQ6IGFwcC5nZXRSYW5kb20oMTAsIDUwLCAyKVxuXHRcdFx0XHR0aXRsZTpcblx0XHRcdFx0XHRmb250U2l6ZTogXCIje2FwcC5nZXRSYW5kb20oMSwgMi41LCAyKX1lbVwiXG5cdFx0XHRcdFx0Y29sb3I6IFwicmdiKCN7IGFwcC5nZXRSYW5kb20oMCwgMTIwKSB9LCN7IGFwcC5nZXRSYW5kb20oMCwgMTIwKSB9LCN7IGFwcC5nZXRSYW5kb20oMCwgMTIwKSB9KVwiXG5cdFx0XHRcdFx0dGV4dEJhc2VsaW5lOiAnbWlkZGxlJyBcblx0XHRcdFx0XHRsaW5lSGVpZ2h0OiBhcHAuZ2V0UmFuZG9tKDE4LCA0MCAsIDIpXG5cdFx0XHRcdFx0bWFyZ2luQm90dG9tOiAwXG5cdFx0XHRcdGJvZHk6XG5cdFx0XHRcdFx0Zm9udFNpemU6IFwiI3thcHAuZ2V0UmFuZG9tKDAuNSwgMS41LCAyKX1lbVwiXG5cdFx0XHRcdFx0Y29sb3I6IFwicmdiKCN7IGFwcC5nZXRSYW5kb20oMCwgMTYwKSB9LCN7IGFwcC5nZXRSYW5kb20oMCwgMTYwKSB9LCN7IGFwcC5nZXRSYW5kb20oMCwgMTYwKSB9KVwiXG5cdFx0XHRcdFx0dGV4dEJhc2VsaW5lOiAnbWlkZGxlJyBcblx0XHRcdFx0XHRsaW5lSGVpZ2h0OiBhcHAuZ2V0UmFuZG9tKDEwLCAzMCAsIDIpXG5cblx0XHRyYW5kb21UZXh0T3B0aW9uc1x0XG5cblx0cHJlcGFyZUluaXRpYWxzID0gKHNleCwgbmFtZSwgc3VybmFtZSkgLT5cblx0XHRpZiBzZXggaXMgJ21hbGUnXG5cdFx0XHRzdXJuYW1lID0gc3VybmFtZVxuXG5cdFx0ZWxzZSBpZiBzZXggaXMgJ2ZlbWFsZSdcblx0XHRcdGlmIHN1cm5hbWUuc3Vic3RyKHN1cm5hbWUubGVuZ3RoLTIsc3VybmFtZS5sZW5ndGgpIGlzICfQuNC5J1xuXHRcdFx0XHRzdXJuYW1lID0gc3VybmFtZS5zbGljZSgwLHN1cm5hbWUubGVuZ3RoLTIpXG5cdFx0XHRcdHN1cm5hbWUgPSBzdXJuYW1lKyfQsNGPJ1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRzdXJuYW1lID0gc3VybmFtZSsnYSdcblxuXHRcdG5hbWUgKyAnICcgKyBzdXJuYW1lXG5cdFx0XG5cdHByZXBhcmVEYXRhID0gKG1vZGVsKSAtPlxuXHRcdGlmIG1vZGVsLmdldCgnZGF0YScpLmlzRGVmYXVsdFxuXHRcdFx0I3NldCBuZXcgcmFuZG9tIGNhcmQgZGF0YSB0byBtb2RlbFxuXHRcdFx0cmFuZG9tRGF0YSA9IGdlbmVyYXRlUmFuZG9tRGF0YSgpXG5cdFx0XHRtb2RlbC5zZXQgJ2RhdGEnLCByYW5kb21EYXRhLFxuXHRcdFx0XHRzaWxlbnQ6IHRydWVcdFx0XHRcdFxuXG5cdFx0aWYgbW9kZWwuZ2V0KCdnZW5lcmF0b3JzLnRleHRHZW4nKS5pc0RlZmF1bHRcblx0XHRcdCNzZXQgbmV3IHJhbmRvbSB0ZXh0IG9wdGlvbnMgdG8gbW9kZWxcblx0XHRcdHJhbmRvbVRleHRPcHRpb25zID0gZ2VuZXJhdGVSYW5kb21UZXh0T3B0aW9ucygpXG5cdFx0XHRtb2RlbC5zZXQgJ2dlbmVyYXRvcnMudGV4dEdlbicsIHJhbmRvbVRleHRPcHRpb25zLFxuXHRcdFx0XHRzaWxlbnQ6IHRydWVcdFx0XHRcblxuXHRcdG1vZGVsLmF0dHJpYnV0ZXNcblxuXHRyZW5kZXJUZXh0ID0gKHN2ZywgbW9kZWwpIC0+XG5cdFx0IyBpZiBmb250RmFtaWx5IGlzICdzYW5zLXNlcmlmJ1xuXHRcdCMgXHRmb250ID0gZm9udEZhbWlseVxuXHRcdCMgZWxzZSBcblx0XHQjIFx0Zm9udCA9ICdcIicrZm9udEZhbWlseSsnXCInXG5cblx0XHQjIHN3aXRjaCB0ZXh0QWxpZ25cblx0XHQjIFx0d2hlbiAnbGVmdCdcblx0XHQjIFx0XHR4ID0gdGV4dEJsb2NrT3B0aW9ucy5wYWRkaW5nLmxlZnRcblx0XHQjIFx0XHR5ID0gdGV4dEJsb2NrT3B0aW9ucy5wYWRkaW5nLnRvcFxuXHRcdCMgXHR3aGVuICdjZW50ZXInIFxuXHRcdCMgXHRcdHggPSBjYW52YXMud2lkdGgvMlxuXHRcdCMgXHRcdHkgPSB0ZXh0QmxvY2tPcHRpb25zLnBhZGRpbmcudG9wXG5cdFx0IyBcdHdoZW4gJ3JpZ2h0J1xuXHRcdCMgXHRcdHggPSBjYW52YXMud2lkdGgtdGV4dEJsb2NrT3B0aW9ucy5wYWRkaW5nLnJpZ2h0XG5cdFx0IyBcdFx0eSA9IHRleHRCbG9ja09wdGlvbnMucGFkZGluZy50b3Bcblx0XHRkYXRhID0gbW9kZWwuZ2V0ICdkYXRhJ1xuXG5cdFx0aGVhZGluZyA9IHN2Zy50ZXh0IC0+XG5cdFx0XHRAdHNwYW4oIHByZXBhcmVJbml0aWFscyBkYXRhLnNleCwgZGF0YS5uYW1lLCBkYXRhLnN1cm5hbWUgKVxuXHRcdFx0LmZpbGwoJyMyMzInKVxuXHRcdFx0Lm5ld0xpbmUoKS5keCAyMFxuXHRcdFx0QGZvbnRcblx0XHRcdFx0c2l6ZTogMzBcblxuXHRcdGJvZHkgPSBzdmcudGV4dChcIkUtbWFpbDogI3sgZGF0YS5lTWFpbCB9IFxcbtCi0LXQu9C10YTQvtC9OiAjeyBkYXRhLnBob25lIH0gXFxu0JTQvtC70LbQvdC+0YHRgtGMOiAjeyBkYXRhLnBvc2l0aW9uIH1cIilcblx0XHQubGVhZGluZygwLjUpXG5cdFx0LmF0dHJcblx0XHRcdHdpZHRoOiAxMFxuXHRcdC5tb3ZlIDIwLCA2MFx0XG5cdFx0LmZvbnRcblx0XHRcdHNpemU6IDIwXG5cdFx0XG5cdFx0d2luZG93LnN2Z0JvZHkgPSBib2R5IHVubGVzcyB3aW5kb3cuc3ZnQm9keVxuXG5cdCMgUHVibGljIG1ldGhvZHNcblx0QGRyYXcgPSAoc3ZnLG1vZGVsLGFyZ3MuLi4pIC0+XG5cblx0XHRwcmVwYXJlRGF0YS5jYWxsIEAsIG1vZGVsXG5cblx0XHRyZW5kZXJUZXh0LmNhbGwgQCwgc3ZnLCBtb2RlbCwgYXJnc1x0XG5cbiJdfQ==